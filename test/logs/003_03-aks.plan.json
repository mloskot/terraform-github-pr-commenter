{"format_version":"1.1","terraform_version":"1.3.7","variables":{"backend_resource_group_name":{"value":"terraform"},"backend_storage_account_container_name":{"value":"tfstate"},"backend_storage_account_name":{"value":"abcdefg"},"environment":{"value":"dev"},"location":{"value":"UK South"},"location_short":{"value":"uks"},"stack":{"value":"base"},"subscription_id":{"value":"1b298c01-0747-469e-8955-af1486a97bc4"}},"planned_values":{"outputs":{"result":{"sensitive":true}},"root_module":{"resources":[{"address":"azurerm_private_dns_zone.private_dns_zone","mode":"managed","type":"azurerm_private_dns_zone","name":"private_dns_zone","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"name":"demo.dev","tags":{"environment":"dev","owner":"demo","stack":"base"},"timeouts":null},"sensitive_values":{"soa_record":[],"tags":{}}}],"child_modules":[{"resources":[{"address":"module.container_registry.azurecaf_name.acr","mode":"managed","type":"azurecaf_name","name":"acr","provider_name":"registry.terraform.io/aztfmod/azurecaf","schema_version":3,"values":{"clean_input":true,"name":"base","passthrough":false,"prefixes":null,"random_length":0,"random_seed":null,"resource_type":"azurerm_container_registry","resource_types":null,"separator":"-","suffixes":["demo","uks","dev"],"use_slug":true},"sensitive_values":{"results":{},"suffixes":[false,false,false]}},{"address":"module.container_registry.azurerm_container_registry.registry","mode":"managed","type":"azurerm_container_registry","name":"registry","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":2,"values":{"admin_enabled":true,"anonymous_pull_enabled":null,"data_endpoint_enabled":null,"export_policy_enabled":true,"georeplications":[],"identity":[],"location":"uksouth","network_rule_bypass_option":"None","public_network_access_enabled":true,"quarantine_policy_enabled":null,"sku":"Premium","tags":{"env":"dev","owner":"demo","stack":"base"},"timeouts":null,"zone_redundancy_enabled":false},"sensitive_values":{"encryption":[],"georeplications":[],"identity":[],"network_rule_set":[],"retention_policy":[],"tags":{},"trust_policy":[]}}],"address":"module.container_registry"},{"resources":[{"address":"module.keyvault.azurecaf_name.keyvault","mode":"managed","type":"azurecaf_name","name":"keyvault","provider_name":"registry.terraform.io/aztfmod/azurecaf","schema_version":3,"values":{"clean_input":true,"name":"base","passthrough":false,"prefixes":null,"random_length":0,"random_seed":null,"resource_type":"azurerm_key_vault","resource_types":null,"separator":"-","suffixes":["demo","uks","dev"],"use_slug":true},"sensitive_values":{"results":{},"suffixes":[false,false,false]}},{"address":"module.keyvault.azurerm_key_vault.keyvault","mode":"managed","type":"azurerm_key_vault","name":"keyvault","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":2,"values":{"contact":[],"enable_rbac_authorization":false,"enabled_for_deployment":true,"enabled_for_disk_encryption":true,"enabled_for_template_deployment":true,"location":"uksouth","network_acls":[{"bypass":"AzureServices","default_action":"Allow","ip_rules":null,"virtual_network_subnet_ids":null}],"public_network_access_enabled":true,"purge_protection_enabled":true,"sku_name":"standard","soft_delete_retention_days":90,"tags":{"env":"dev","owner":"demo","stack":"base"},"tenant_id":"bc1095a9-bbd6-44bb-9434-d899022f9dc3","timeouts":null},"sensitive_values":{"access_policy":[],"contact":[],"network_acls":[{}],"tags":{}}},{"address":"module.keyvault.azurerm_key_vault_access_policy.admin_policy[\"690e2167-e552-4c9f-9d3e-92d7efc272ba\"]","mode":"managed","type":"azurerm_key_vault_access_policy","name":"admin_policy","index":"690e2167-e552-4c9f-9d3e-92d7efc272ba","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"application_id":null,"certificate_permissions":["Backup","Create","Delete","DeleteIssuers","Get","GetIssuers","Import","List","ListIssuers","ManageContacts","ManageIssuers","Purge","Recover","Restore","SetIssuers","Update"],"key_permissions":["Backup","Create","Decrypt","Delete","Encrypt","Get","Import","List","Purge","Recover","Restore","Sign","UnwrapKey","Update","Verify","WrapKey"],"object_id":"690e2167-e552-4c9f-9d3e-92d7efc272ba","secret_permissions":["Backup","Delete","Get","List","Purge","Recover","Restore","Set"],"storage_permissions":null,"tenant_id":"bc1095a9-bbd6-44bb-9434-d899022f9dc3","timeouts":null},"sensitive_values":{"certificate_permissions":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],"key_permissions":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],"secret_permissions":[false,false,false,false,false,false,false,false]}}],"address":"module.keyvault"},{"resources":[{"address":"module.log_analytics.azurecaf_name.log_analytics_workspace","mode":"managed","type":"azurecaf_name","name":"log_analytics_workspace","provider_name":"registry.terraform.io/aztfmod/azurecaf","schema_version":3,"values":{"clean_input":true,"name":"base","passthrough":false,"prefixes":null,"random_length":0,"random_seed":null,"resource_type":"azurerm_log_analytics_workspace","resource_types":null,"separator":"-","suffixes":["demo","uks","dev"],"use_slug":true},"sensitive_values":{"results":{},"suffixes":[false,false,false]}},{"address":"module.log_analytics.azurecaf_name.storage_account","mode":"managed","type":"azurecaf_name","name":"storage_account","provider_name":"registry.terraform.io/aztfmod/azurecaf","schema_version":3,"values":{"clean_input":true,"id":"cruxkxurguhfragt","name":"base","passthrough":false,"prefixes":null,"random_length":0,"random_seed":null,"resource_type":"azurerm_storage_account","resource_types":null,"result":"stbaseuksdevlog","results":{},"separator":"-","suffixes":["uks","dev","log"],"use_slug":true},"sensitive_values":{"results":{},"suffixes":[false,false,false]}},{"address":"module.log_analytics.azurerm_advanced_threat_protection.storage_threat_protection","mode":"managed","type":"azurerm_advanced_threat_protection","name":"storage_threat_protection","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":1,"values":{"enabled":false,"timeouts":null},"sensitive_values":{}},{"address":"module.log_analytics.azurerm_log_analytics_workspace.log_workspace","mode":"managed","type":"azurerm_log_analytics_workspace","name":"log_workspace","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":3,"values":{"allow_resource_only_permissions":true,"cmk_for_query_forced":null,"daily_quota_gb":-1,"internet_ingestion_enabled":true,"internet_query_enabled":true,"local_authentication_disabled":false,"location":"uksouth","retention_in_days":30,"sku":"PerGB2018","tags":{"env":"dev","new-tag":"false","owner":"demo","stack":"base"},"timeouts":null},"sensitive_values":{"tags":{}}},{"address":"module.log_analytics.azurerm_storage_account.storage_logs","mode":"managed","type":"azurerm_storage_account","name":"storage_logs","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":3,"values":{"account_kind":"StorageV2","account_replication_type":"LRS","account_tier":"Standard","allow_nested_items_to_be_public":true,"allowed_copy_scope":null,"azure_files_authentication":[],"cross_tenant_replication_enabled":true,"custom_domain":[],"customer_managed_key":[],"default_to_oauth_authentication":false,"edge_zone":null,"enable_https_traffic_only":true,"identity":[],"immutability_policy":[],"infrastructure_encryption_enabled":false,"is_hns_enabled":false,"location":"uksouth","min_tls_version":"TLS1_2","name":"stbaseuksdevlog","nfsv3_enabled":false,"public_network_access_enabled":true,"queue_encryption_key_type":"Service","sas_policy":[],"sftp_enabled":false,"shared_access_key_enabled":true,"static_website":[],"table_encryption_key_type":"Service","tags":{"env":"dev","new-tag":"false","owner":"demo","stack":"base"},"timeouts":null},"sensitive_values":{"azure_files_authentication":[],"blob_properties":[],"custom_domain":[],"customer_managed_key":[],"identity":[],"immutability_policy":[],"network_rules":[],"queue_properties":[],"routing":[],"sas_policy":[],"share_properties":[],"static_website":[],"tags":{}}},{"address":"module.log_analytics.azurerm_storage_management_policy.archive_storage[0]","mode":"managed","type":"azurerm_storage_management_policy","name":"archive_storage","index":0,"provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"rule":[{"actions":[{"base_blob":[{"delete_after_days_since_creation_greater_than":-1,"delete_after_days_since_last_access_time_greater_than":-1,"delete_after_days_since_modification_greater_than":365,"tier_to_archive_after_days_since_creation_greater_than":-1,"tier_to_archive_after_days_since_last_access_time_greater_than":-1,"tier_to_archive_after_days_since_last_tier_change_greater_than":-1,"tier_to_archive_after_days_since_modification_greater_than":90,"tier_to_cool_after_days_since_creation_greater_than":-1,"tier_to_cool_after_days_since_last_access_time_greater_than":-1,"tier_to_cool_after_days_since_modification_greater_than":30}],"snapshot":[],"version":[]}],"enabled":true,"filters":[{"blob_types":["blockBlob"],"match_blob_index_tag":[],"prefix_match":null}],"name":"Archive"}],"timeouts":null},"sensitive_values":{"rule":[{"actions":[{"base_blob":[{}],"snapshot":[],"version":[]}],"filters":[{"blob_types":[false],"match_blob_index_tag":[]}]}]}},{"address":"module.log_analytics.data.external.generate_storage_sas_token","mode":"data","type":"external","name":"generate_storage_sas_token","provider_name":"registry.terraform.io/hashicorp/external","schema_version":0,"values":{"program":["bash","../../../../../modules/azure/terraform_azurerm_log_analytics/files/script_sas_token.sh"],"query":{"permissions_account":"wlacu","permissions_container":"dlrw","resources_types":"sco","services":"bfqt","storage_container":"","token_expiry":"2042-01-01T00:00:00Z"},"working_dir":null},"sensitive_values":{"program":[false,false],"query":{"storage_connection_string":true},"result":{}}}],"address":"module.log_analytics"},{"resources":[{"address":"module.resource_group.azurecaf_name.rg","mode":"managed","type":"azurecaf_name","name":"rg","provider_name":"registry.terraform.io/aztfmod/azurecaf","schema_version":3,"values":{"clean_input":true,"name":"base","passthrough":false,"prefixes":null,"random_length":0,"random_seed":null,"resource_type":"azurerm_resource_group","resource_types":null,"separator":"-","suffixes":["demo","dev"],"use_slug":true},"sensitive_values":{"results":{},"suffixes":[false,false]}},{"address":"module.resource_group.azurerm_resource_group.main_rg","mode":"managed","type":"azurerm_resource_group","name":"main_rg","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"location":"uksouth","tags":{"env":"dev","owner":"demo","stack":"base"},"timeouts":null},"sensitive_values":{"tags":{}}}],"address":"module.resource_group"}]}},"resource_changes":[{"address":"azurerm_private_dns_zone.private_dns_zone","mode":"managed","type":"azurerm_private_dns_zone","name":"private_dns_zone","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["delete","create"],"before":{"id":"/subscriptions/1b298c01-0747-469e-8955-af1486a97bc4/resourceGroups/rg-base-example-dev/providers/Microsoft.Network/privateDnsZones/example.dev","max_number_of_record_sets":25000,"max_number_of_virtual_network_links":1000,"max_number_of_virtual_network_links_with_registration":100,"name":"example.dev","number_of_record_sets":1,"resource_group_name":"rg-base-example-dev","soa_record":[{"email":"azureprivatedns-host.microsoft.com","expire_time":2419200,"fqdn":"example.dev.","host_name":"azureprivatedns.net","minimum_ttl":10,"refresh_time":3600,"retry_time":300,"serial_number":1,"tags":{},"ttl":3600}],"tags":{"environment":"dev","owner":"example","stack":"base"},"timeouts":null},"after":{"name":"demo.dev","tags":{"environment":"dev","owner":"demo","stack":"base"},"timeouts":null},"after_unknown":{"id":true,"max_number_of_record_sets":true,"max_number_of_virtual_network_links":true,"max_number_of_virtual_network_links_with_registration":true,"number_of_record_sets":true,"resource_group_name":true,"soa_record":true,"tags":{}},"before_sensitive":{"soa_record":[{"tags":{}}],"tags":{}},"after_sensitive":{"soa_record":[],"tags":{}},"replace_paths":[["name"],["resource_group_name"]]},"action_reason":"replace_because_cannot_update"},{"address":"module.container_registry.azurecaf_name.acr","module_address":"module.container_registry","mode":"managed","type":"azurecaf_name","name":"acr","provider_name":"registry.terraform.io/aztfmod/azurecaf","change":{"actions":["delete","create"],"before":{"clean_input":true,"id":"pfdmpfpdlciiuheh","name":"base","passthrough":false,"prefixes":null,"random_length":0,"random_seed":null,"resource_type":"azurerm_container_registry","resource_types":null,"result":"crbaseexampleuksdev","results":{},"separator":"-","suffixes":["example","uks","dev"],"use_slug":true},"after":{"clean_input":true,"name":"base","passthrough":false,"prefixes":null,"random_length":0,"random_seed":null,"resource_type":"azurerm_container_registry","resource_types":null,"separator":"-","suffixes":["demo","uks","dev"],"use_slug":true},"after_unknown":{"id":true,"result":true,"results":true,"suffixes":[false,false,false]},"before_sensitive":{"results":{},"suffixes":[false,false,false]},"after_sensitive":{"results":{},"suffixes":[false,false,false]},"replace_paths":[["suffixes"]]},"action_reason":"replace_because_cannot_update"},{"address":"module.container_registry.azurerm_container_registry.registry","module_address":"module.container_registry","mode":"managed","type":"azurerm_container_registry","name":"registry","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["delete","create"],"before":{"admin_enabled":true,"admin_password":"v=R/cViEljzs3ihNyHygFCVxs3aIfJS6","admin_username":"crbaseexampleuksdev","anonymous_pull_enabled":false,"data_endpoint_enabled":false,"encryption":[{"enabled":false,"identity_client_id":"","key_vault_key_id":""}],"export_policy_enabled":true,"georeplications":[],"id":"/subscriptions/1b298c01-0747-469e-8955-af1486a97bc4/resourceGroups/rg-base-example-dev/providers/Microsoft.ContainerRegistry/registries/crbaseexampleuksdev","identity":[],"location":"uksouth","login_server":"crbaseexampleuksdev.azurecr.io","name":"crbaseexampleuksdev","network_rule_bypass_option":"None","network_rule_set":[{"default_action":"Allow","ip_rule":[],"virtual_network":[]}],"public_network_access_enabled":true,"quarantine_policy_enabled":false,"resource_group_name":"rg-base-example-dev","retention_policy":[{"days":7,"enabled":false}],"sku":"Premium","tags":{"env":"dev","owner":"example","stack":"base"},"timeouts":null,"trust_policy":[{"enabled":false}],"zone_redundancy_enabled":false},"after":{"admin_enabled":true,"anonymous_pull_enabled":null,"data_endpoint_enabled":null,"export_policy_enabled":true,"georeplications":[],"identity":[],"location":"uksouth","network_rule_bypass_option":"None","public_network_access_enabled":true,"quarantine_policy_enabled":null,"sku":"Premium","tags":{"env":"dev","owner":"demo","stack":"base"},"timeouts":null,"zone_redundancy_enabled":false},"after_unknown":{"admin_password":true,"admin_username":true,"encryption":true,"georeplications":[],"id":true,"identity":[],"login_server":true,"name":true,"network_rule_set":true,"resource_group_name":true,"retention_policy":true,"tags":{},"trust_policy":true},"before_sensitive":{"admin_password":true,"encryption":[{}],"georeplications":[],"identity":[],"network_rule_set":[{"ip_rule":[],"virtual_network":[]}],"retention_policy":[{}],"tags":{},"trust_policy":[{}]},"after_sensitive":{"admin_password":true,"encryption":[],"georeplications":[],"identity":[],"network_rule_set":[],"retention_policy":[],"tags":{},"trust_policy":[]},"replace_paths":[["name"],["resource_group_name"]]},"action_reason":"replace_because_cannot_update"},{"address":"module.keyvault.azurecaf_name.keyvault","module_address":"module.keyvault","mode":"managed","type":"azurecaf_name","name":"keyvault","provider_name":"registry.terraform.io/aztfmod/azurecaf","change":{"actions":["delete","create"],"before":{"clean_input":true,"id":"ohetjyrybvqoxtwf","name":"base","passthrough":false,"prefixes":null,"random_length":0,"random_seed":null,"resource_type":"azurerm_key_vault","resource_types":null,"result":"kv-base-example-uks-dev","results":{},"separator":"-","suffixes":["example","uks","dev"],"use_slug":true},"after":{"clean_input":true,"name":"base","passthrough":false,"prefixes":null,"random_length":0,"random_seed":null,"resource_type":"azurerm_key_vault","resource_types":null,"separator":"-","suffixes":["demo","uks","dev"],"use_slug":true},"after_unknown":{"id":true,"result":true,"results":true,"suffixes":[false,false,false]},"before_sensitive":{"results":{},"suffixes":[false,false,false]},"after_sensitive":{"results":{},"suffixes":[false,false,false]},"replace_paths":[["suffixes"]]},"action_reason":"replace_because_cannot_update"},{"address":"module.keyvault.azurerm_key_vault.keyvault","module_address":"module.keyvault","mode":"managed","type":"azurerm_key_vault","name":"keyvault","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["delete","create"],"before":{"access_policy":[{"application_id":"","certificate_permissions":["Get","List","Update","Create","Import","Delete","Recover","Backup","Restore","ManageContacts","ManageIssuers","GetIssuers","ListIssuers","SetIssuers","DeleteIssuers"],"key_permissions":["Get","List","Update","Create","Import","Delete","Recover","Backup","Restore","GetRotationPolicy","SetRotationPolicy","Rotate"],"object_id":"18b6a0ca-6584-46de-9095-b373ffba4acc","secret_permissions":["Get","List","Set","Delete","Recover","Backup","Restore"],"storage_permissions":[],"tenant_id":"bc1095a9-bbd6-44bb-9434-d899022f9dc3"},{"application_id":"","certificate_permissions":["Get","List","Update","Create","Import","Delete","Recover","Backup","Restore","ManageContacts","ManageIssuers","GetIssuers","ListIssuers","SetIssuers","DeleteIssuers"],"key_permissions":["Get","List","Update","Create","Import","Delete","Recover","Backup","Restore","GetRotationPolicy","SetRotationPolicy","Rotate"],"object_id":"236564d1-ef85-4b32-867d-5d8a405dabf1","secret_permissions":["Get","List","Set","Delete","Recover","Backup","Restore"],"storage_permissions":[],"tenant_id":"bc1095a9-bbd6-44bb-9434-d899022f9dc3"},{"application_id":"","certificate_permissions":[],"key_permissions":[],"object_id":"8785da90-903a-454c-8d57-dfcf4ee30a90","secret_permissions":["Get","List"],"storage_permissions":[],"tenant_id":"bc1095a9-bbd6-44bb-9434-d899022f9dc3"}],"contact":[],"enable_rbac_authorization":true,"enabled_for_deployment":true,"enabled_for_disk_encryption":true,"enabled_for_template_deployment":true,"id":"/subscriptions/1b298c01-0747-469e-8955-af1486a97bc4/resourceGroups/rg-base-example-dev/providers/Microsoft.KeyVault/vaults/kv-base-example-uks-dev","location":"uksouth","name":"kv-base-example-uks-dev","network_acls":[{"bypass":"AzureServices","default_action":"Allow","ip_rules":[],"virtual_network_subnet_ids":[]}],"public_network_access_enabled":true,"purge_protection_enabled":true,"resource_group_name":"rg-base-example-dev","sku_name":"standard","soft_delete_retention_days":90,"tags":{"env":"dev","owner":"example","stack":"base"},"tenant_id":"bc1095a9-bbd6-44bb-9434-d899022f9dc3","timeouts":null,"vault_uri":"https://kv-base-example-uks-dev.vault.azure.net/"},"after":{"contact":[],"enable_rbac_authorization":false,"enabled_for_deployment":true,"enabled_for_disk_encryption":true,"enabled_for_template_deployment":true,"location":"uksouth","network_acls":[{"bypass":"AzureServices","default_action":"Allow","ip_rules":null,"virtual_network_subnet_ids":null}],"public_network_access_enabled":true,"purge_protection_enabled":true,"sku_name":"standard","soft_delete_retention_days":90,"tags":{"env":"dev","owner":"demo","stack":"base"},"tenant_id":"bc1095a9-bbd6-44bb-9434-d899022f9dc3","timeouts":null},"after_unknown":{"access_policy":true,"contact":[],"id":true,"name":true,"network_acls":[{}],"resource_group_name":true,"tags":{},"vault_uri":true},"before_sensitive":{"access_policy":[{"certificate_permissions":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],"key_permissions":[false,false,false,false,false,false,false,false,false,false,false,false],"secret_permissions":[false,false,false,false,false,false,false],"storage_permissions":[]},{"certificate_permissions":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],"key_permissions":[false,false,false,false,false,false,false,false,false,false,false,false],"secret_permissions":[false,false,false,false,false,false,false],"storage_permissions":[]},{"certificate_permissions":[],"key_permissions":[],"secret_permissions":[false,false],"storage_permissions":[]}],"contact":[],"network_acls":[{"ip_rules":[],"virtual_network_subnet_ids":[]}],"tags":{}},"after_sensitive":{"access_policy":[],"contact":[],"network_acls":[{}],"tags":{}},"replace_paths":[["name"],["resource_group_name"]]},"action_reason":"replace_because_cannot_update"},{"address":"module.keyvault.azurerm_key_vault_access_policy.admin_policy[\"690e2167-e552-4c9f-9d3e-92d7efc272ba\"]","module_address":"module.keyvault","mode":"managed","type":"azurerm_key_vault_access_policy","name":"admin_policy","index":"690e2167-e552-4c9f-9d3e-92d7efc272ba","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"application_id":null,"certificate_permissions":["Backup","Create","Delete","DeleteIssuers","Get","GetIssuers","Import","List","ListIssuers","ManageContacts","ManageIssuers","Purge","Recover","Restore","SetIssuers","Update"],"key_permissions":["Backup","Create","Decrypt","Delete","Encrypt","Get","Import","List","Purge","Recover","Restore","Sign","UnwrapKey","Update","Verify","WrapKey"],"object_id":"690e2167-e552-4c9f-9d3e-92d7efc272ba","secret_permissions":["Backup","Delete","Get","List","Purge","Recover","Restore","Set"],"storage_permissions":null,"tenant_id":"bc1095a9-bbd6-44bb-9434-d899022f9dc3","timeouts":null},"after_unknown":{"certificate_permissions":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],"id":true,"key_permissions":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],"key_vault_id":true,"secret_permissions":[false,false,false,false,false,false,false,false]},"before_sensitive":false,"after_sensitive":{"certificate_permissions":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],"key_permissions":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],"secret_permissions":[false,false,false,false,false,false,false,false]}}},{"address":"module.keyvault.azurerm_role_assignment.rbac_keyvault_administrator[\"ae622e27-c608-4875-9d25-4ff8b6273682\"]","module_address":"module.keyvault","mode":"managed","type":"azurerm_role_assignment","name":"rbac_keyvault_administrator","index":"ae622e27-c608-4875-9d25-4ff8b6273682","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["delete"],"before":{"condition":"","condition_version":"","delegated_managed_identity_resource_id":"","description":"","id":"/subscriptions/1b298c01-0747-469e-8955-af1486a97bc4/resourceGroups/rg-base-example-dev/providers/Microsoft.KeyVault/vaults/kv-base-example-uks-dev/providers/Microsoft.Authorization/roleAssignments/377069dd-71d8-9a6b-02af-0da3d8b56e1f","name":"377069dd-71d8-9a6b-02af-0da3d8b56e1f","principal_id":"ae622e27-c608-4875-9d25-4ff8b6273682","principal_type":"Group","role_definition_id":"/subscriptions/1b298c01-0747-469e-8955-af1486a97bc4/providers/Microsoft.Authorization/roleDefinitions/00482a5a-887f-4fb3-b363-3b7fe8e74483","role_definition_name":"Key Vault Administrator","scope":"/subscriptions/1b298c01-0747-469e-8955-af1486a97bc4/resourceGroups/rg-base-example-dev/providers/Microsoft.KeyVault/vaults/kv-base-example-uks-dev","skip_service_principal_aad_check":null,"timeouts":null},"after":null,"after_unknown":{},"before_sensitive":{},"after_sensitive":false},"action_reason":"delete_because_each_key"},{"address":"module.log_analytics.azurecaf_name.log_analytics_workspace","module_address":"module.log_analytics","mode":"managed","type":"azurecaf_name","name":"log_analytics_workspace","provider_name":"registry.terraform.io/aztfmod/azurecaf","change":{"actions":["delete","create"],"before":{"clean_input":true,"id":"hchrmxccvssatmau","name":"base","passthrough":false,"prefixes":null,"random_length":0,"random_seed":null,"resource_type":"azurerm_log_analytics_workspace","resource_types":null,"result":"log-base-example-uks-dev","results":{},"separator":"-","suffixes":["example","uks","dev"],"use_slug":true},"after":{"clean_input":true,"name":"base","passthrough":false,"prefixes":null,"random_length":0,"random_seed":null,"resource_type":"azurerm_log_analytics_workspace","resource_types":null,"separator":"-","suffixes":["demo","uks","dev"],"use_slug":true},"after_unknown":{"id":true,"result":true,"results":true,"suffixes":[false,false,false]},"before_sensitive":{"results":{},"suffixes":[false,false,false]},"after_sensitive":{"results":{},"suffixes":[false,false,false]},"replace_paths":[["suffixes"]]},"action_reason":"replace_because_cannot_update"},{"address":"module.log_analytics.azurecaf_name.storage_account","module_address":"module.log_analytics","mode":"managed","type":"azurecaf_name","name":"storage_account","provider_name":"registry.terraform.io/aztfmod/azurecaf","change":{"actions":["no-op"],"before":{"clean_input":true,"id":"cruxkxurguhfragt","name":"base","passthrough":false,"prefixes":null,"random_length":0,"random_seed":null,"resource_type":"azurerm_storage_account","resource_types":null,"result":"stbaseuksdevlog","results":{},"separator":"-","suffixes":["uks","dev","log"],"use_slug":true},"after":{"clean_input":true,"id":"cruxkxurguhfragt","name":"base","passthrough":false,"prefixes":null,"random_length":0,"random_seed":null,"resource_type":"azurerm_storage_account","resource_types":null,"result":"stbaseuksdevlog","results":{},"separator":"-","suffixes":["uks","dev","log"],"use_slug":true},"after_unknown":{},"before_sensitive":{"results":{},"suffixes":[false,false,false]},"after_sensitive":{"results":{},"suffixes":[false,false,false]}}},{"address":"module.log_analytics.azurerm_advanced_threat_protection.storage_threat_protection","module_address":"module.log_analytics","mode":"managed","type":"azurerm_advanced_threat_protection","name":"storage_threat_protection","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["delete","create"],"before":{"enabled":false,"id":"/subscriptions/1b298c01-0747-469e-8955-af1486a97bc4/resourceGroups/rg-base-example-dev/providers/Microsoft.Storage/storageAccounts/stbaseuksdevlog/providers/Microsoft.Security/advancedThreatProtectionSettings/current","target_resource_id":"/subscriptions/1b298c01-0747-469e-8955-af1486a97bc4/resourceGroups/rg-base-example-dev/providers/Microsoft.Storage/storageAccounts/stbaseuksdevlog","timeouts":null},"after":{"enabled":false,"timeouts":null},"after_unknown":{"id":true,"target_resource_id":true},"before_sensitive":{},"after_sensitive":{},"replace_paths":[["target_resource_id"]]},"action_reason":"replace_because_cannot_update"},{"address":"module.log_analytics.azurerm_log_analytics_workspace.log_workspace","module_address":"module.log_analytics","mode":"managed","type":"azurerm_log_analytics_workspace","name":"log_workspace","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["delete","create"],"before":{"allow_resource_only_permissions":true,"cmk_for_query_forced":false,"daily_quota_gb":-1,"id":"/subscriptions/1b298c01-0747-469e-8955-af1486a97bc4/resourceGroups/rg-base-example-dev/providers/Microsoft.OperationalInsights/workspaces/log-base-example-uks-dev","internet_ingestion_enabled":true,"internet_query_enabled":true,"local_authentication_disabled":false,"location":"uksouth","name":"log-base-example-uks-dev","primary_shared_key":"tb5fbw3f78LY+er3vrAEHayxehDPMUfhy4MD3XU/zfhbc/jG5v5tDeEHsx/sXSqq/xRgIhuxv4tr1RmNAekwGQ==","reservation_capacity_in_gb_per_day":null,"resource_group_name":"rg-base-example-dev","retention_in_days":30,"secondary_shared_key":"hPw6l4yAEDxHBjdshJmEhxxLk7zeP8AQt5An9DItfZd4YoSxpshAlMvWYebOSwU3u3vpwRqKcahP5LsEvflwyg==","sku":"PerGB2018","tags":{"env":"dev","owner":"example","stack":"base"},"timeouts":null,"workspace_id":"a2b30f78-78d2-4c3e-8119-0dc377552fc2"},"after":{"allow_resource_only_permissions":true,"cmk_for_query_forced":null,"daily_quota_gb":-1,"internet_ingestion_enabled":true,"internet_query_enabled":true,"local_authentication_disabled":false,"location":"uksouth","retention_in_days":30,"sku":"PerGB2018","tags":{"env":"dev","new-tag":"false","owner":"demo","stack":"base"},"timeouts":null},"after_unknown":{"id":true,"name":true,"primary_shared_key":true,"reservation_capacity_in_gb_per_day":true,"resource_group_name":true,"secondary_shared_key":true,"tags":{},"workspace_id":true},"before_sensitive":{"primary_shared_key":true,"secondary_shared_key":true,"tags":{}},"after_sensitive":{"primary_shared_key":true,"secondary_shared_key":true,"tags":{}},"replace_paths":[["name"],["resource_group_name"]]},"action_reason":"replace_because_cannot_update"},{"address":"module.log_analytics.azurerm_storage_account.storage_logs","module_address":"module.log_analytics","mode":"managed","type":"azurerm_storage_account","name":"storage_logs","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["delete","create"],"before":{"access_tier":"Hot","account_kind":"StorageV2","account_replication_type":"LRS","account_tier":"Standard","allow_nested_items_to_be_public":true,"allowed_copy_scope":"","azure_files_authentication":[],"blob_properties":[{"change_feed_enabled":false,"change_feed_retention_in_days":0,"container_delete_retention_policy":[],"cors_rule":[],"default_service_version":"","delete_retention_policy":[],"last_access_time_enabled":false,"restore_policy":[],"versioning_enabled":false}],"cross_tenant_replication_enabled":true,"custom_domain":[],"customer_managed_key":[],"default_to_oauth_authentication":false,"edge_zone":"","enable_https_traffic_only":true,"id":"/subscriptions/1b298c01-0747-469e-8955-af1486a97bc4/resourceGroups/rg-base-example-dev/providers/Microsoft.Storage/storageAccounts/stbaseuksdevlog","identity":[],"immutability_policy":[],"infrastructure_encryption_enabled":false,"is_hns_enabled":false,"large_file_share_enabled":null,"location":"uksouth","min_tls_version":"TLS1_2","name":"stbaseuksdevlog","network_rules":[{"bypass":["AzureServices"],"default_action":"Allow","ip_rules":[],"private_link_access":[],"virtual_network_subnet_ids":[]}],"nfsv3_enabled":false,"primary_access_key":"Ebu1z97moGKIWu6CwlZp5HJ0HpJUCIpf2dURE1kz3tFF/RH4dNiIVkjUetSyruJF3RA5m0PCcVph+AStOmQQ7w==","primary_blob_connection_string":"DefaultEndpointsProtocol=https;BlobEndpoint=https://stbaseuksdevlog.blob.core.windows.net/;AccountName=stbaseuksdevlog;AccountKey=Ebu1z97moGKIWu6CwlZp5HJ0HpJUCIpf2dURE1kz3tFF/RH4dNiIVkjUetSyruJF3RA5m0PCcVph+AStOmQQ7w==","primary_blob_endpoint":"https://stbaseuksdevlog.blob.core.windows.net/","primary_blob_host":"stbaseuksdevlog.blob.core.windows.net","primary_connection_string":"DefaultEndpointsProtocol=https;AccountName=stbaseuksdevlog;AccountKey=Ebu1z97moGKIWu6CwlZp5HJ0HpJUCIpf2dURE1kz3tFF/RH4dNiIVkjUetSyruJF3RA5m0PCcVph+AStOmQQ7w==;EndpointSuffix=core.windows.net","primary_dfs_endpoint":"https://stbaseuksdevlog.dfs.core.windows.net/","primary_dfs_host":"stbaseuksdevlog.dfs.core.windows.net","primary_file_endpoint":"https://stbaseuksdevlog.file.core.windows.net/","primary_file_host":"stbaseuksdevlog.file.core.windows.net","primary_location":"uksouth","primary_queue_endpoint":"https://stbaseuksdevlog.queue.core.windows.net/","primary_queue_host":"stbaseuksdevlog.queue.core.windows.net","primary_table_endpoint":"https://stbaseuksdevlog.table.core.windows.net/","primary_table_host":"stbaseuksdevlog.table.core.windows.net","primary_web_endpoint":"https://stbaseuksdevlog.z33.web.core.windows.net/","primary_web_host":"stbaseuksdevlog.z33.web.core.windows.net","public_network_access_enabled":true,"queue_encryption_key_type":"Service","queue_properties":[{"cors_rule":[],"hour_metrics":[{"enabled":true,"include_apis":true,"retention_policy_days":7,"version":"1.0"}],"logging":[{"delete":false,"read":false,"retention_policy_days":0,"version":"1.0","write":false}],"minute_metrics":[{"enabled":false,"include_apis":false,"retention_policy_days":0,"version":"1.0"}]}],"resource_group_name":"rg-base-example-dev","routing":[],"sas_policy":[],"secondary_access_key":"sxInMiUAVAd51bWzu3MLH3E5gslpRrAoDRwBn0xys1tswCXQefkMYsQYhI8xIY8azgw/sn5MHh8y+AStZY7RWg==","secondary_blob_connection_string":"","secondary_blob_endpoint":null,"secondary_blob_host":null,"secondary_connection_string":"DefaultEndpointsProtocol=https;AccountName=stbaseuksdevlog;AccountKey=sxInMiUAVAd51bWzu3MLH3E5gslpRrAoDRwBn0xys1tswCXQefkMYsQYhI8xIY8azgw/sn5MHh8y+AStZY7RWg==;EndpointSuffix=core.windows.net","secondary_dfs_endpoint":null,"secondary_dfs_host":null,"secondary_file_endpoint":null,"secondary_file_host":null,"secondary_location":"","secondary_queue_endpoint":null,"secondary_queue_host":null,"secondary_table_endpoint":null,"secondary_table_host":null,"secondary_web_endpoint":null,"secondary_web_host":null,"sftp_enabled":false,"share_properties":[{"cors_rule":[],"retention_policy":[{"days":7}],"smb":[]}],"shared_access_key_enabled":true,"static_website":[],"table_encryption_key_type":"Service","tags":{"env":"dev","owner":"example","stack":"base"},"timeouts":null},"after":{"account_kind":"StorageV2","account_replication_type":"LRS","account_tier":"Standard","allow_nested_items_to_be_public":true,"allowed_copy_scope":null,"azure_files_authentication":[],"cross_tenant_replication_enabled":true,"custom_domain":[],"customer_managed_key":[],"default_to_oauth_authentication":false,"edge_zone":null,"enable_https_traffic_only":true,"identity":[],"immutability_policy":[],"infrastructure_encryption_enabled":false,"is_hns_enabled":false,"location":"uksouth","min_tls_version":"TLS1_2","name":"stbaseuksdevlog","nfsv3_enabled":false,"public_network_access_enabled":true,"queue_encryption_key_type":"Service","sas_policy":[],"sftp_enabled":false,"shared_access_key_enabled":true,"static_website":[],"table_encryption_key_type":"Service","tags":{"env":"dev","new-tag":"false","owner":"demo","stack":"base"},"timeouts":null},"after_unknown":{"access_tier":true,"azure_files_authentication":[],"blob_properties":true,"custom_domain":[],"customer_managed_key":[],"id":true,"identity":[],"immutability_policy":[],"large_file_share_enabled":true,"network_rules":true,"primary_access_key":true,"primary_blob_connection_string":true,"primary_blob_endpoint":true,"primary_blob_host":true,"primary_connection_string":true,"primary_dfs_endpoint":true,"primary_dfs_host":true,"primary_file_endpoint":true,"primary_file_host":true,"primary_location":true,"primary_queue_endpoint":true,"primary_queue_host":true,"primary_table_endpoint":true,"primary_table_host":true,"primary_web_endpoint":true,"primary_web_host":true,"queue_properties":true,"resource_group_name":true,"routing":true,"sas_policy":[],"secondary_access_key":true,"secondary_blob_connection_string":true,"secondary_blob_endpoint":true,"secondary_blob_host":true,"secondary_connection_string":true,"secondary_dfs_endpoint":true,"secondary_dfs_host":true,"secondary_file_endpoint":true,"secondary_file_host":true,"secondary_location":true,"secondary_queue_endpoint":true,"secondary_queue_host":true,"secondary_table_endpoint":true,"secondary_table_host":true,"secondary_web_endpoint":true,"secondary_web_host":true,"share_properties":true,"static_website":[],"tags":{}},"before_sensitive":{"azure_files_authentication":[],"blob_properties":[{"container_delete_retention_policy":[],"cors_rule":[],"delete_retention_policy":[],"restore_policy":[]}],"custom_domain":[],"customer_managed_key":[],"identity":[],"immutability_policy":[],"network_rules":[{"bypass":[false],"ip_rules":[],"private_link_access":[],"virtual_network_subnet_ids":[]}],"primary_access_key":true,"primary_blob_connection_string":true,"primary_connection_string":true,"queue_properties":[{"cors_rule":[],"hour_metrics":[{}],"logging":[{}],"minute_metrics":[{}]}],"routing":[],"sas_policy":[],"secondary_access_key":true,"secondary_blob_connection_string":true,"secondary_connection_string":true,"share_properties":[{"cors_rule":[],"retention_policy":[{}],"smb":[]}],"static_website":[],"tags":{}},"after_sensitive":{"azure_files_authentication":[],"blob_properties":[],"custom_domain":[],"customer_managed_key":[],"identity":[],"immutability_policy":[],"network_rules":[],"primary_access_key":true,"primary_blob_connection_string":true,"primary_connection_string":true,"queue_properties":[],"routing":[],"sas_policy":[],"secondary_access_key":true,"secondary_blob_connection_string":true,"secondary_connection_string":true,"share_properties":[],"static_website":[],"tags":{}},"replace_paths":[["resource_group_name"]]},"action_reason":"replace_because_cannot_update"},{"address":"module.log_analytics.azurerm_storage_management_policy.archive_storage[0]","module_address":"module.log_analytics","mode":"managed","type":"azurerm_storage_management_policy","name":"archive_storage","index":0,"provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["delete","create"],"before":{"id":"/subscriptions/1b298c01-0747-469e-8955-af1486a97bc4/resourceGroups/rg-base-example-dev/providers/Microsoft.Storage/storageAccounts/stbaseuksdevlog/managementPolicies/default","rule":[{"actions":[{"base_blob":[{"delete_after_days_since_creation_greater_than":-1,"delete_after_days_since_last_access_time_greater_than":-1,"delete_after_days_since_modification_greater_than":365,"tier_to_archive_after_days_since_creation_greater_than":-1,"tier_to_archive_after_days_since_last_access_time_greater_than":-1,"tier_to_archive_after_days_since_last_tier_change_greater_than":-1,"tier_to_archive_after_days_since_modification_greater_than":90,"tier_to_cool_after_days_since_creation_greater_than":-1,"tier_to_cool_after_days_since_last_access_time_greater_than":-1,"tier_to_cool_after_days_since_modification_greater_than":30}],"snapshot":[],"version":[]}],"enabled":true,"filters":[{"blob_types":["blockBlob"],"match_blob_index_tag":[],"prefix_match":[]}],"name":"Archive"}],"storage_account_id":"/subscriptions/1b298c01-0747-469e-8955-af1486a97bc4/resourceGroups/rg-base-example-dev/providers/Microsoft.Storage/storageAccounts/stbaseuksdevlog","timeouts":null},"after":{"rule":[{"actions":[{"base_blob":[{"delete_after_days_since_creation_greater_than":-1,"delete_after_days_since_last_access_time_greater_than":-1,"delete_after_days_since_modification_greater_than":365,"tier_to_archive_after_days_since_creation_greater_than":-1,"tier_to_archive_after_days_since_last_access_time_greater_than":-1,"tier_to_archive_after_days_since_last_tier_change_greater_than":-1,"tier_to_archive_after_days_since_modification_greater_than":90,"tier_to_cool_after_days_since_creation_greater_than":-1,"tier_to_cool_after_days_since_last_access_time_greater_than":-1,"tier_to_cool_after_days_since_modification_greater_than":30}],"snapshot":[],"version":[]}],"enabled":true,"filters":[{"blob_types":["blockBlob"],"match_blob_index_tag":[],"prefix_match":null}],"name":"Archive"}],"timeouts":null},"after_unknown":{"id":true,"rule":[{"actions":[{"base_blob":[{}],"snapshot":[],"version":[]}],"filters":[{"blob_types":[false],"match_blob_index_tag":[]}]}],"storage_account_id":true},"before_sensitive":{"rule":[{"actions":[{"base_blob":[{}],"snapshot":[],"version":[]}],"filters":[{"blob_types":[false],"match_blob_index_tag":[],"prefix_match":[]}]}]},"after_sensitive":{"rule":[{"actions":[{"base_blob":[{}],"snapshot":[],"version":[]}],"filters":[{"blob_types":[false],"match_blob_index_tag":[]}]}]},"replace_paths":[["storage_account_id"]]},"action_reason":"replace_because_cannot_update"},{"address":"module.log_analytics.data.external.generate_storage_sas_token","module_address":"module.log_analytics","mode":"data","type":"external","name":"generate_storage_sas_token","provider_name":"registry.terraform.io/hashicorp/external","change":{"actions":["read"],"before":null,"after":{"program":["bash","../../../../../modules/azure/terraform_azurerm_log_analytics/files/script_sas_token.sh"],"query":{"permissions_account":"wlacu","permissions_container":"dlrw","resources_types":"sco","services":"bfqt","storage_container":"","token_expiry":"2042-01-01T00:00:00Z"},"working_dir":null},"after_unknown":{"id":true,"program":[false,false],"query":{"storage_account_name":true,"storage_connection_string":true},"result":true},"before_sensitive":false,"after_sensitive":{"program":[false,false],"query":{"storage_connection_string":true},"result":{}}},"action_reason":"read_because_config_unknown"},{"address":"module.resource_group.azurecaf_name.rg","module_address":"module.resource_group","mode":"managed","type":"azurecaf_name","name":"rg","provider_name":"registry.terraform.io/aztfmod/azurecaf","change":{"actions":["delete","create"],"before":{"clean_input":true,"id":"hgovayvauumnhejb","name":"base","passthrough":false,"prefixes":null,"random_length":0,"random_seed":null,"resource_type":"azurerm_resource_group","resource_types":null,"result":"rg-base-example-dev","results":{},"separator":"-","suffixes":["example","dev"],"use_slug":true},"after":{"clean_input":true,"name":"base","passthrough":false,"prefixes":null,"random_length":0,"random_seed":null,"resource_type":"azurerm_resource_group","resource_types":null,"separator":"-","suffixes":["demo","dev"],"use_slug":true},"after_unknown":{"id":true,"result":true,"results":true,"suffixes":[false,false]},"before_sensitive":{"results":{},"suffixes":[false,false]},"after_sensitive":{"results":{},"suffixes":[false,false]},"replace_paths":[["suffixes"]]},"action_reason":"replace_because_cannot_update"},{"address":"module.resource_group.azurerm_resource_group.main_rg","module_address":"module.resource_group","mode":"managed","type":"azurerm_resource_group","name":"main_rg","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["delete","create"],"before":{"id":"/subscriptions/1b298c01-0747-469e-8955-af1486a97bc4/resourceGroups/rg-base-example-dev","location":"uksouth","name":"rg-base-example-dev","tags":{"env":"dev","owner":"example","stack":"base"},"timeouts":null},"after":{"location":"uksouth","tags":{"env":"dev","owner":"demo","stack":"base"},"timeouts":null},"after_unknown":{"id":true,"name":true,"tags":{}},"before_sensitive":{"tags":{}},"after_sensitive":{"tags":{}},"replace_paths":[["name"]]},"action_reason":"replace_because_cannot_update"}],"output_changes":{"result":{"actions":["update"],"before":{"acr_fqdn":"crbaseexampleuksdev.azurecr.io","acr_id":"/subscriptions/1b298c01-0747-469e-8955-af1486a97bc4/resourceGroups/rg-base-example-dev/providers/Microsoft.ContainerRegistry/registries/crbaseexampleuksdev","acr_name":"crbaseexampleuksdev","admin_password":"crbaseexampleuksdev","admin_username":"crbaseexampleuksdev","key_vault_id":"/subscriptions/1b298c01-0747-469e-8955-af1486a97bc4/resourceGroups/rg-base-example-dev/providers/Microsoft.KeyVault/vaults/kv-base-example-uks-dev","key_vault_name":"kv-base-example-uks-dev","key_vault_uri":"https://kv-base-example-uks-dev.vault.azure.net/","log_analytics_workspace_guid":"a2b30f78-78d2-4c3e-8119-0dc377552fc2","log_analytics_workspace_id":"/subscriptions/1b298c01-0747-469e-8955-af1486a97bc4/resourceGroups/rg-base-example-dev/providers/Microsoft.OperationalInsights/workspaces/log-base-example-uks-dev","log_analytics_workspace_name":"log-base-example-uks-dev","log_analytics_workspace_primary_key":"tb5fbw3f78LY+er3vrAEHayxehDPMUfhy4MD3XU/zfhbc/jG5v5tDeEHsx/sXSqq/xRgIhuxv4tr1RmNAekwGQ==","log_analytics_workspace_secondary_key":"hPw6l4yAEDxHBjdshJmEhxxLk7zeP8AQt5An9DItfZd4YoSxpshAlMvWYebOSwU3u3vpwRqKcahP5LsEvflwyg==","login_server":"crbaseexampleuksdev.azurecr.io","logs_resource_group_name":"rg-base-example-dev","logs_storage_account_appservices_container_name":"","logs_storage_account_archived_logs_fileshare_name":"","logs_storage_account_id":"/subscriptions/1b298c01-0747-469e-8955-af1486a97bc4/resourceGroups/rg-base-example-dev/providers/Microsoft.Storage/storageAccounts/stbaseuksdevlog","logs_storage_account_name":"stbaseuksdevlog","logs_storage_account_primary_access_key":"Ebu1z97moGKIWu6CwlZp5HJ0HpJUCIpf2dURE1kz3tFF/RH4dNiIVkjUetSyruJF3RA5m0PCcVph+AStOmQQ7w==","logs_storage_account_primary_connection_string":"DefaultEndpointsProtocol=https;AccountName=stbaseuksdevlog;AccountKey=Ebu1z97moGKIWu6CwlZp5HJ0HpJUCIpf2dURE1kz3tFF/RH4dNiIVkjUetSyruJF3RA5m0PCcVph+AStOmQQ7w==;EndpointSuffix=core.windows.net","logs_storage_account_sas_token":"?se=2042-01-01T00%3A00%3A00Z\u0026sp=wlacu\u0026sv=2021-06-08\u0026ss=tqfb\u0026srt=sco\u0026sig=0mTwfPvS/OCZV4075TiX8XTbEMP%2Bb/583GmUnKruvdg%3D","logs_storage_account_secondary_access_key":"sxInMiUAVAd51bWzu3MLH3E5gslpRrAoDRwBn0xys1tswCXQefkMYsQYhI8xIY8azgw/sn5MHh8y+AStZY7RWg==","logs_storage_account_secondary_connection_string":"DefaultEndpointsProtocol=https;AccountName=stbaseuksdevlog;AccountKey=sxInMiUAVAd51bWzu3MLH3E5gslpRrAoDRwBn0xys1tswCXQefkMYsQYhI8xIY8azgw/sn5MHh8y+AStZY7RWg==;EndpointSuffix=core.windows.net","private_dns_zone_id":"/subscriptions/1b298c01-0747-469e-8955-af1486a97bc4/resourceGroups/rg-base-example-dev/providers/Microsoft.Network/privateDnsZones/example.dev","private_dns_zone_name":"example.dev","resource_group_id":"/subscriptions/1b298c01-0747-469e-8955-af1486a97bc4/resourceGroups/rg-base-example-dev","resource_group_location":"uksouth","resource_group_name":"rg-base-example-dev"},"after":{"logs_storage_account_appservices_container_name":"","logs_storage_account_archived_logs_fileshare_name":"","logs_storage_account_name":"stbaseuksdevlog","private_dns_zone_name":"demo.dev","resource_group_location":"uksouth"},"after_unknown":{"acr_fqdn":true,"acr_id":true,"acr_name":true,"admin_password":true,"admin_username":true,"key_vault_id":true,"key_vault_name":true,"key_vault_uri":true,"log_analytics_workspace_guid":true,"log_analytics_workspace_id":true,"log_analytics_workspace_name":true,"log_analytics_workspace_primary_key":true,"log_analytics_workspace_secondary_key":true,"login_server":true,"logs_resource_group_name":true,"logs_storage_account_id":true,"logs_storage_account_primary_access_key":true,"logs_storage_account_primary_connection_string":true,"logs_storage_account_sas_token":true,"logs_storage_account_secondary_access_key":true,"logs_storage_account_secondary_connection_string":true,"private_dns_zone_id":true,"resource_group_id":true,"resource_group_name":true},"before_sensitive":true,"after_sensitive":true}},"prior_state":{"format_version":"1.0","terraform_version":"1.3.7","values":{"outputs":{"result":{"sensitive":true,"value":{"acr_fqdn":"crbaseexampleuksdev.azurecr.io","acr_id":"/subscriptions/1b298c01-0747-469e-8955-af1486a97bc4/resourceGroups/rg-base-example-dev/providers/Microsoft.ContainerRegistry/registries/crbaseexampleuksdev","acr_name":"crbaseexampleuksdev","admin_password":"crbaseexampleuksdev","admin_username":"crbaseexampleuksdev","key_vault_id":"/subscriptions/1b298c01-0747-469e-8955-af1486a97bc4/resourceGroups/rg-base-example-dev/providers/Microsoft.KeyVault/vaults/kv-base-example-uks-dev","key_vault_name":"kv-base-example-uks-dev","key_vault_uri":"https://kv-base-example-uks-dev.vault.azure.net/","log_analytics_workspace_guid":"a2b30f78-78d2-4c3e-8119-0dc377552fc2","log_analytics_workspace_id":"/subscriptions/1b298c01-0747-469e-8955-af1486a97bc4/resourceGroups/rg-base-example-dev/providers/Microsoft.OperationalInsights/workspaces/log-base-example-uks-dev","log_analytics_workspace_name":"log-base-example-uks-dev","log_analytics_workspace_primary_key":"tb5fbw3f78LY+er3vrAEHayxehDPMUfhy4MD3XU/zfhbc/jG5v5tDeEHsx/sXSqq/xRgIhuxv4tr1RmNAekwGQ==","log_analytics_workspace_secondary_key":"hPw6l4yAEDxHBjdshJmEhxxLk7zeP8AQt5An9DItfZd4YoSxpshAlMvWYebOSwU3u3vpwRqKcahP5LsEvflwyg==","login_server":"crbaseexampleuksdev.azurecr.io","logs_resource_group_name":"rg-base-example-dev","logs_storage_account_appservices_container_name":"","logs_storage_account_archived_logs_fileshare_name":"","logs_storage_account_id":"/subscriptions/1b298c01-0747-469e-8955-af1486a97bc4/resourceGroups/rg-base-example-dev/providers/Microsoft.Storage/storageAccounts/stbaseuksdevlog","logs_storage_account_name":"stbaseuksdevlog","logs_storage_account_primary_access_key":"Ebu1z97moGKIWu6CwlZp5HJ0HpJUCIpf2dURE1kz3tFF/RH4dNiIVkjUetSyruJF3RA5m0PCcVph+AStOmQQ7w==","logs_storage_account_primary_connection_string":"DefaultEndpointsProtocol=https;AccountName=stbaseuksdevlog;AccountKey=Ebu1z97moGKIWu6CwlZp5HJ0HpJUCIpf2dURE1kz3tFF/RH4dNiIVkjUetSyruJF3RA5m0PCcVph+AStOmQQ7w==;EndpointSuffix=core.windows.net","logs_storage_account_sas_token":"?se=2042-01-01T00%3A00%3A00Z\u0026sp=wlacu\u0026sv=2021-06-08\u0026ss=tqfb\u0026srt=sco\u0026sig=0mTwfPvS/OCZV4075TiX8XTbEMP%2Bb/583GmUnKruvdg%3D","logs_storage_account_secondary_access_key":"sxInMiUAVAd51bWzu3MLH3E5gslpRrAoDRwBn0xys1tswCXQefkMYsQYhI8xIY8azgw/sn5MHh8y+AStZY7RWg==","logs_storage_account_secondary_connection_string":"DefaultEndpointsProtocol=https;AccountName=stbaseuksdevlog;AccountKey=sxInMiUAVAd51bWzu3MLH3E5gslpRrAoDRwBn0xys1tswCXQefkMYsQYhI8xIY8azgw/sn5MHh8y+AStZY7RWg==;EndpointSuffix=core.windows.net","private_dns_zone_id":"/subscriptions/1b298c01-0747-469e-8955-af1486a97bc4/resourceGroups/rg-base-example-dev/providers/Microsoft.Network/privateDnsZones/example.dev","private_dns_zone_name":"example.dev","resource_group_id":"/subscriptions/1b298c01-0747-469e-8955-af1486a97bc4/resourceGroups/rg-base-example-dev","resource_group_location":"uksouth","resource_group_name":"rg-base-example-dev"},"type":["object",{"acr_fqdn":"string","acr_id":"string","acr_name":"string","admin_password":"string","admin_username":"string","key_vault_id":"string","key_vault_name":"string","key_vault_uri":"string","log_analytics_workspace_guid":"string","log_analytics_workspace_id":"string","log_analytics_workspace_name":"string","log_analytics_workspace_primary_key":"string","log_analytics_workspace_secondary_key":"string","login_server":"string","logs_resource_group_name":"string","logs_storage_account_appservices_container_name":"string","logs_storage_account_archived_logs_fileshare_name":"string","logs_storage_account_id":"string","logs_storage_account_name":"string","logs_storage_account_primary_access_key":"string","logs_storage_account_primary_connection_string":"string","logs_storage_account_sas_token":"string","logs_storage_account_secondary_access_key":"string","logs_storage_account_secondary_connection_string":"string","private_dns_zone_id":"string","private_dns_zone_name":"string","resource_group_id":"string","resource_group_location":"string","resource_group_name":"string"}]}},"root_module":{"resources":[{"address":"azurerm_private_dns_zone.private_dns_zone","mode":"managed","type":"azurerm_private_dns_zone","name":"private_dns_zone","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"id":"/subscriptions/1b298c01-0747-469e-8955-af1486a97bc4/resourceGroups/rg-base-example-dev/providers/Microsoft.Network/privateDnsZones/example.dev","max_number_of_record_sets":25000,"max_number_of_virtual_network_links":1000,"max_number_of_virtual_network_links_with_registration":100,"name":"example.dev","number_of_record_sets":1,"resource_group_name":"rg-base-example-dev","soa_record":[{"email":"azureprivatedns-host.microsoft.com","expire_time":2419200,"fqdn":"example.dev.","host_name":"azureprivatedns.net","minimum_ttl":10,"refresh_time":3600,"retry_time":300,"serial_number":1,"tags":{},"ttl":3600}],"tags":{"environment":"dev","owner":"example","stack":"base"},"timeouts":null},"sensitive_values":{"soa_record":[{"tags":{}}],"tags":{}},"depends_on":["data.azurerm_key_vault_secret.client_id","data.azurerm_key_vault_secret.client_secret","data.azurerm_key_vault_secret.tenant_id","module.resource_group.azurecaf_name.rg","module.resource_group.azurerm_resource_group.main_rg"]},{"address":"data.azurerm_client_config.current","mode":"data","type":"azurerm_client_config","name":"current","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"client_id":"3f20ae01-f278-4af7-b78a-c28370ade952","id":"Y2xpZW50Q29uZmlncy9jbGllbnRJZD1mZTFjMTRmZC1jZDg5LTRjMTEtYTlkNy1kZGIxMTE5M2NmY2E7b2JqZWN0SWQ9MjM2NTY0ZDEtZWY4NS00YjMyLTg2N2QtNWQ4YTQwNWRhYmYxO3N1YnNjcmlwdGlvbklkPTQ2MjllOWI1LTc3ZmQtNGIzMC04ODhjLTA2NTkwNGNhMDcyMTt0ZW5hbnRJZD0yM2M3ZmY3ZC1lZjcwLTQ3N2MtODIyOS1kYTcwNDkzOGY4OWU=","object_id":"236564d1-ef85-4b32-867d-5d8a405dabf1","subscription_id":"1b298c01-0747-469e-8955-af1486a97bc4","tenant_id":"bc1095a9-bbd6-44bb-9434-d899022f9dc3","timeouts":null},"sensitive_values":{}},{"address":"data.azurerm_key_vault_secret.client_id","mode":"data","type":"azurerm_key_vault_secret","name":"client_id","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"content_type":"","id":"https://abcdefg.vault.azure.net/secrets/client-id/5e017d7db4f94beaa60c0fdf5ac565b5","key_vault_id":"/subscriptions/1b298c01-0747-469e-8955-af1486a97bc4/resourceGroups/terraform/providers/Microsoft.KeyVault/vaults/abcdefg","name":"client-id","resource_id":"/subscriptions/1b298c01-0747-469e-8955-af1486a97bc4/resourceGroups/terraform/providers/Microsoft.KeyVault/vaults/abcdefg/secrets/client-id/versions/5e017d7db4f94beaa60c0fdf5ac565b5","resource_versionless_id":"/subscriptions/1b298c01-0747-469e-8955-af1486a97bc4/resourceGroups/terraform/providers/Microsoft.KeyVault/vaults/abcdefg/secrets/client-id","tags":{},"timeouts":null,"value":"3f20ae01-f278-4af7-b78a-c28370ade952","version":"5e017d7db4f94beaa60c0fdf5ac565b5","versionless_id":"https://abcdefg.vault.azure.net/secrets/client-id"},"sensitive_values":{"tags":{}}},{"address":"data.azurerm_key_vault_secret.client_secret","mode":"data","type":"azurerm_key_vault_secret","name":"client_secret","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"content_type":"","id":"https://abcdefg.vault.azure.net/secrets/client-secret/33848788fc2341a1be0ff0c091780f58","key_vault_id":"/subscriptions/1b298c01-0747-469e-8955-af1486a97bc4/resourceGroups/terraform/providers/Microsoft.KeyVault/vaults/abcdefg","name":"client-secret","resource_id":"/subscriptions/1b298c01-0747-469e-8955-af1486a97bc4/resourceGroups/terraform/providers/Microsoft.KeyVault/vaults/abcdefg/secrets/client-secret/versions/33848788fc2341a1be0ff0c091780f58","resource_versionless_id":"/subscriptions/1b298c01-0747-469e-8955-af1486a97bc4/resourceGroups/terraform/providers/Microsoft.KeyVault/vaults/abcdefg/secrets/client-secret","tags":{},"timeouts":null,"value":"DeE8Q~SHDPfJ4KCUzzeN2JYbafPRa6-eHJDtSaZr","version":"33848788fc2341a1be0ff0c091780f58","versionless_id":"https://abcdefg.vault.azure.net/secrets/client-secret"},"sensitive_values":{"tags":{}}},{"address":"data.azurerm_key_vault_secret.tenant_id","mode":"data","type":"azurerm_key_vault_secret","name":"tenant_id","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"content_type":"","id":"https://abcdefg.vault.azure.net/secrets/tenant-id/ddb4003956f2491a99cbf00108c94b46","key_vault_id":"/subscriptions/1b298c01-0747-469e-8955-af1486a97bc4/resourceGroups/terraform/providers/Microsoft.KeyVault/vaults/abcdefg","name":"tenant-id","resource_id":"/subscriptions/1b298c01-0747-469e-8955-af1486a97bc4/resourceGroups/terraform/providers/Microsoft.KeyVault/vaults/abcdefg/secrets/tenant-id/versions/ddb4003956f2491a99cbf00108c94b46","resource_versionless_id":"/subscriptions/1b298c01-0747-469e-8955-af1486a97bc4/resourceGroups/terraform/providers/Microsoft.KeyVault/vaults/abcdefg/secrets/tenant-id","tags":{},"timeouts":null,"value":"bc1095a9-bbd6-44bb-9434-d899022f9dc3","version":"ddb4003956f2491a99cbf00108c94b46","versionless_id":"https://abcdefg.vault.azure.net/secrets/tenant-id"},"sensitive_values":{"tags":{}}}],"child_modules":[{"resources":[{"address":"module.container_registry.azurecaf_name.acr","mode":"managed","type":"azurecaf_name","name":"acr","provider_name":"registry.terraform.io/aztfmod/azurecaf","schema_version":3,"values":{"clean_input":true,"id":"pfdmpfpdlciiuheh","name":"base","passthrough":false,"prefixes":null,"random_length":0,"random_seed":null,"resource_type":"azurerm_container_registry","resource_types":null,"result":"crbaseexampleuksdev","results":{},"separator":"-","suffixes":["example","uks","dev"],"use_slug":true},"sensitive_values":{"results":{},"suffixes":[false,false,false]}},{"address":"module.container_registry.azurerm_container_registry.registry","mode":"managed","type":"azurerm_container_registry","name":"registry","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":2,"values":{"admin_enabled":true,"admin_password":"v=R/cViEljzs3ihNyHygFCVxs3aIfJS6","admin_username":"crbaseexampleuksdev","anonymous_pull_enabled":false,"data_endpoint_enabled":false,"encryption":[{"enabled":false,"identity_client_id":"","key_vault_key_id":""}],"export_policy_enabled":true,"georeplications":[],"id":"/subscriptions/1b298c01-0747-469e-8955-af1486a97bc4/resourceGroups/rg-base-example-dev/providers/Microsoft.ContainerRegistry/registries/crbaseexampleuksdev","identity":[],"location":"uksouth","login_server":"crbaseexampleuksdev.azurecr.io","name":"crbaseexampleuksdev","network_rule_bypass_option":"None","network_rule_set":[{"default_action":"Allow","ip_rule":[],"virtual_network":[]}],"public_network_access_enabled":true,"quarantine_policy_enabled":false,"resource_group_name":"rg-base-example-dev","retention_policy":[{"days":7,"enabled":false}],"sku":"Premium","tags":{"env":"dev","owner":"example","stack":"base"},"timeouts":null,"trust_policy":[{"enabled":false}],"zone_redundancy_enabled":false},"sensitive_values":{"encryption":[{}],"georeplications":[],"identity":[],"network_rule_set":[{"ip_rule":[],"virtual_network":[]}],"retention_policy":[{}],"tags":{},"trust_policy":[{}]},"depends_on":["data.azurerm_key_vault_secret.client_id","data.azurerm_key_vault_secret.client_secret","data.azurerm_key_vault_secret.tenant_id","module.container_registry.azurecaf_name.acr","module.resource_group.azurecaf_name.rg","module.resource_group.azurerm_resource_group.main_rg"]}],"address":"module.container_registry"},{"resources":[{"address":"module.keyvault.azurecaf_name.keyvault","mode":"managed","type":"azurecaf_name","name":"keyvault","provider_name":"registry.terraform.io/aztfmod/azurecaf","schema_version":3,"values":{"clean_input":true,"id":"ohetjyrybvqoxtwf","name":"base","passthrough":false,"prefixes":null,"random_length":0,"random_seed":null,"resource_type":"azurerm_key_vault","resource_types":null,"result":"kv-base-example-uks-dev","results":{},"separator":"-","suffixes":["example","uks","dev"],"use_slug":true},"sensitive_values":{"results":{},"suffixes":[false,false,false]}},{"address":"module.keyvault.azurerm_key_vault.keyvault","mode":"managed","type":"azurerm_key_vault","name":"keyvault","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":2,"values":{"access_policy":[{"application_id":"","certificate_permissions":["Get","List","Update","Create","Import","Delete","Recover","Backup","Restore","ManageContacts","ManageIssuers","GetIssuers","ListIssuers","SetIssuers","DeleteIssuers"],"key_permissions":["Get","List","Update","Create","Import","Delete","Recover","Backup","Restore","GetRotationPolicy","SetRotationPolicy","Rotate"],"object_id":"18b6a0ca-6584-46de-9095-b373ffba4acc","secret_permissions":["Get","List","Set","Delete","Recover","Backup","Restore"],"storage_permissions":[],"tenant_id":"bc1095a9-bbd6-44bb-9434-d899022f9dc3"},{"application_id":"","certificate_permissions":["Get","List","Update","Create","Import","Delete","Recover","Backup","Restore","ManageContacts","ManageIssuers","GetIssuers","ListIssuers","SetIssuers","DeleteIssuers"],"key_permissions":["Get","List","Update","Create","Import","Delete","Recover","Backup","Restore","GetRotationPolicy","SetRotationPolicy","Rotate"],"object_id":"236564d1-ef85-4b32-867d-5d8a405dabf1","secret_permissions":["Get","List","Set","Delete","Recover","Backup","Restore"],"storage_permissions":[],"tenant_id":"bc1095a9-bbd6-44bb-9434-d899022f9dc3"},{"application_id":"","certificate_permissions":[],"key_permissions":[],"object_id":"8785da90-903a-454c-8d57-dfcf4ee30a90","secret_permissions":["Get","List"],"storage_permissions":[],"tenant_id":"bc1095a9-bbd6-44bb-9434-d899022f9dc3"}],"contact":[],"enable_rbac_authorization":true,"enabled_for_deployment":true,"enabled_for_disk_encryption":true,"enabled_for_template_deployment":true,"id":"/subscriptions/1b298c01-0747-469e-8955-af1486a97bc4/resourceGroups/rg-base-example-dev/providers/Microsoft.KeyVault/vaults/kv-base-example-uks-dev","location":"uksouth","name":"kv-base-example-uks-dev","network_acls":[{"bypass":"AzureServices","default_action":"Allow","ip_rules":[],"virtual_network_subnet_ids":[]}],"public_network_access_enabled":true,"purge_protection_enabled":true,"resource_group_name":"rg-base-example-dev","sku_name":"standard","soft_delete_retention_days":90,"tags":{"env":"dev","owner":"example","stack":"base"},"tenant_id":"bc1095a9-bbd6-44bb-9434-d899022f9dc3","timeouts":null,"vault_uri":"https://kv-base-example-uks-dev.vault.azure.net/"},"sensitive_values":{"access_policy":[{"certificate_permissions":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],"key_permissions":[false,false,false,false,false,false,false,false,false,false,false,false],"secret_permissions":[false,false,false,false,false,false,false],"storage_permissions":[]},{"certificate_permissions":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],"key_permissions":[false,false,false,false,false,false,false,false,false,false,false,false],"secret_permissions":[false,false,false,false,false,false,false],"storage_permissions":[]},{"certificate_permissions":[],"key_permissions":[],"secret_permissions":[false,false],"storage_permissions":[]}],"contact":[],"network_acls":[{"ip_rules":[],"virtual_network_subnet_ids":[]}],"tags":{}},"depends_on":["data.azurerm_key_vault_secret.client_id","data.azurerm_key_vault_secret.client_secret","data.azurerm_key_vault_secret.tenant_id","module.keyvault.azurecaf_name.keyvault","module.keyvault.data.azurerm_client_config.current_config","module.resource_group.azurecaf_name.rg","module.resource_group.azurerm_resource_group.main_rg"]},{"address":"module.keyvault.azurerm_role_assignment.rbac_keyvault_administrator[\"ae622e27-c608-4875-9d25-4ff8b6273682\"]","mode":"managed","type":"azurerm_role_assignment","name":"rbac_keyvault_administrator","index":"ae622e27-c608-4875-9d25-4ff8b6273682","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"condition":"","condition_version":"","delegated_managed_identity_resource_id":"","description":"","id":"/subscriptions/1b298c01-0747-469e-8955-af1486a97bc4/resourceGroups/rg-base-example-dev/providers/Microsoft.KeyVault/vaults/kv-base-example-uks-dev/providers/Microsoft.Authorization/roleAssignments/377069dd-71d8-9a6b-02af-0da3d8b56e1f","name":"377069dd-71d8-9a6b-02af-0da3d8b56e1f","principal_id":"ae622e27-c608-4875-9d25-4ff8b6273682","principal_type":"Group","role_definition_id":"/subscriptions/1b298c01-0747-469e-8955-af1486a97bc4/providers/Microsoft.Authorization/roleDefinitions/00482a5a-887f-4fb3-b363-3b7fe8e74483","role_definition_name":"Key Vault Administrator","scope":"/subscriptions/1b298c01-0747-469e-8955-af1486a97bc4/resourceGroups/rg-base-example-dev/providers/Microsoft.KeyVault/vaults/kv-base-example-uks-dev","skip_service_principal_aad_check":null,"timeouts":null},"sensitive_values":{},"depends_on":["data.azurerm_key_vault_secret.client_id","data.azurerm_key_vault_secret.client_secret","data.azurerm_key_vault_secret.tenant_id","module.keyvault.azurecaf_name.keyvault","module.keyvault.azurerm_key_vault.keyvault","module.keyvault.data.azurerm_client_config.current_config","module.resource_group.azurecaf_name.rg","module.resource_group.azurerm_resource_group.main_rg"]},{"address":"module.keyvault.data.azurerm_client_config.current_config","mode":"data","type":"azurerm_client_config","name":"current_config","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"client_id":"3f20ae01-f278-4af7-b78a-c28370ade952","id":"Y2xpZW50Q29uZmlncy9jbGllbnRJZD1mZTFjMTRmZC1jZDg5LTRjMTEtYTlkNy1kZGIxMTE5M2NmY2E7b2JqZWN0SWQ9MjM2NTY0ZDEtZWY4NS00YjMyLTg2N2QtNWQ4YTQwNWRhYmYxO3N1YnNjcmlwdGlvbklkPTQ2MjllOWI1LTc3ZmQtNGIzMC04ODhjLTA2NTkwNGNhMDcyMTt0ZW5hbnRJZD0yM2M3ZmY3ZC1lZjcwLTQ3N2MtODIyOS1kYTcwNDkzOGY4OWU=","object_id":"236564d1-ef85-4b32-867d-5d8a405dabf1","subscription_id":"1b298c01-0747-469e-8955-af1486a97bc4","tenant_id":"bc1095a9-bbd6-44bb-9434-d899022f9dc3","timeouts":null},"sensitive_values":{}}],"address":"module.keyvault"},{"resources":[{"address":"module.log_analytics.azurecaf_name.log_analytics_workspace","mode":"managed","type":"azurecaf_name","name":"log_analytics_workspace","provider_name":"registry.terraform.io/aztfmod/azurecaf","schema_version":3,"values":{"clean_input":true,"id":"hchrmxccvssatmau","name":"base","passthrough":false,"prefixes":null,"random_length":0,"random_seed":null,"resource_type":"azurerm_log_analytics_workspace","resource_types":null,"result":"log-base-example-uks-dev","results":{},"separator":"-","suffixes":["example","uks","dev"],"use_slug":true},"sensitive_values":{"results":{},"suffixes":[false,false,false]}},{"address":"module.log_analytics.azurecaf_name.storage_account","mode":"managed","type":"azurecaf_name","name":"storage_account","provider_name":"registry.terraform.io/aztfmod/azurecaf","schema_version":3,"values":{"clean_input":true,"id":"cruxkxurguhfragt","name":"base","passthrough":false,"prefixes":null,"random_length":0,"random_seed":null,"resource_type":"azurerm_storage_account","resource_types":null,"result":"stbaseuksdevlog","results":{},"separator":"-","suffixes":["uks","dev","log"],"use_slug":true},"sensitive_values":{"results":{},"suffixes":[false,false,false]}},{"address":"module.log_analytics.azurerm_advanced_threat_protection.storage_threat_protection","mode":"managed","type":"azurerm_advanced_threat_protection","name":"storage_threat_protection","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":1,"values":{"enabled":false,"id":"/subscriptions/1b298c01-0747-469e-8955-af1486a97bc4/resourceGroups/rg-base-example-dev/providers/Microsoft.Storage/storageAccounts/stbaseuksdevlog/providers/Microsoft.Security/advancedThreatProtectionSettings/current","target_resource_id":"/subscriptions/1b298c01-0747-469e-8955-af1486a97bc4/resourceGroups/rg-base-example-dev/providers/Microsoft.Storage/storageAccounts/stbaseuksdevlog","timeouts":null},"sensitive_values":{},"depends_on":["data.azurerm_key_vault_secret.client_id","data.azurerm_key_vault_secret.client_secret","data.azurerm_key_vault_secret.tenant_id","module.log_analytics.azurecaf_name.storage_account","module.log_analytics.azurerm_storage_account.storage_logs","module.resource_group.azurecaf_name.rg","module.resource_group.azurerm_resource_group.main_rg"]},{"address":"module.log_analytics.azurerm_log_analytics_workspace.log_workspace","mode":"managed","type":"azurerm_log_analytics_workspace","name":"log_workspace","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":3,"values":{"allow_resource_only_permissions":true,"cmk_for_query_forced":false,"daily_quota_gb":-1,"id":"/subscriptions/1b298c01-0747-469e-8955-af1486a97bc4/resourceGroups/rg-base-example-dev/providers/Microsoft.OperationalInsights/workspaces/log-base-example-uks-dev","internet_ingestion_enabled":true,"internet_query_enabled":true,"local_authentication_disabled":false,"location":"uksouth","name":"log-base-example-uks-dev","primary_shared_key":"tb5fbw3f78LY+er3vrAEHayxehDPMUfhy4MD3XU/zfhbc/jG5v5tDeEHsx/sXSqq/xRgIhuxv4tr1RmNAekwGQ==","reservation_capacity_in_gb_per_day":null,"resource_group_name":"rg-base-example-dev","retention_in_days":30,"secondary_shared_key":"hPw6l4yAEDxHBjdshJmEhxxLk7zeP8AQt5An9DItfZd4YoSxpshAlMvWYebOSwU3u3vpwRqKcahP5LsEvflwyg==","sku":"PerGB2018","tags":{"env":"dev","owner":"example","stack":"base"},"timeouts":null,"workspace_id":"a2b30f78-78d2-4c3e-8119-0dc377552fc2"},"sensitive_values":{"tags":{}},"depends_on":["data.azurerm_key_vault_secret.client_id","data.azurerm_key_vault_secret.client_secret","data.azurerm_key_vault_secret.tenant_id","module.log_analytics.azurecaf_name.log_analytics_workspace","module.resource_group.azurecaf_name.rg","module.resource_group.azurerm_resource_group.main_rg"]},{"address":"module.log_analytics.azurerm_storage_account.storage_logs","mode":"managed","type":"azurerm_storage_account","name":"storage_logs","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":3,"values":{"access_tier":"Hot","account_kind":"StorageV2","account_replication_type":"LRS","account_tier":"Standard","allow_nested_items_to_be_public":true,"allowed_copy_scope":"","azure_files_authentication":[],"blob_properties":[{"change_feed_enabled":false,"change_feed_retention_in_days":0,"container_delete_retention_policy":[],"cors_rule":[],"default_service_version":"","delete_retention_policy":[],"last_access_time_enabled":false,"restore_policy":[],"versioning_enabled":false}],"cross_tenant_replication_enabled":true,"custom_domain":[],"customer_managed_key":[],"default_to_oauth_authentication":false,"edge_zone":"","enable_https_traffic_only":true,"id":"/subscriptions/1b298c01-0747-469e-8955-af1486a97bc4/resourceGroups/rg-base-example-dev/providers/Microsoft.Storage/storageAccounts/stbaseuksdevlog","identity":[],"immutability_policy":[],"infrastructure_encryption_enabled":false,"is_hns_enabled":false,"large_file_share_enabled":null,"location":"uksouth","min_tls_version":"TLS1_2","name":"stbaseuksdevlog","network_rules":[{"bypass":["AzureServices"],"default_action":"Allow","ip_rules":[],"private_link_access":[],"virtual_network_subnet_ids":[]}],"nfsv3_enabled":false,"primary_access_key":"Ebu1z97moGKIWu6CwlZp5HJ0HpJUCIpf2dURE1kz3tFF/RH4dNiIVkjUetSyruJF3RA5m0PCcVph+AStOmQQ7w==","primary_blob_connection_string":"DefaultEndpointsProtocol=https;BlobEndpoint=https://stbaseuksdevlog.blob.core.windows.net/;AccountName=stbaseuksdevlog;AccountKey=Ebu1z97moGKIWu6CwlZp5HJ0HpJUCIpf2dURE1kz3tFF/RH4dNiIVkjUetSyruJF3RA5m0PCcVph+AStOmQQ7w==","primary_blob_endpoint":"https://stbaseuksdevlog.blob.core.windows.net/","primary_blob_host":"stbaseuksdevlog.blob.core.windows.net","primary_connection_string":"DefaultEndpointsProtocol=https;AccountName=stbaseuksdevlog;AccountKey=Ebu1z97moGKIWu6CwlZp5HJ0HpJUCIpf2dURE1kz3tFF/RH4dNiIVkjUetSyruJF3RA5m0PCcVph+AStOmQQ7w==;EndpointSuffix=core.windows.net","primary_dfs_endpoint":"https://stbaseuksdevlog.dfs.core.windows.net/","primary_dfs_host":"stbaseuksdevlog.dfs.core.windows.net","primary_file_endpoint":"https://stbaseuksdevlog.file.core.windows.net/","primary_file_host":"stbaseuksdevlog.file.core.windows.net","primary_location":"uksouth","primary_queue_endpoint":"https://stbaseuksdevlog.queue.core.windows.net/","primary_queue_host":"stbaseuksdevlog.queue.core.windows.net","primary_table_endpoint":"https://stbaseuksdevlog.table.core.windows.net/","primary_table_host":"stbaseuksdevlog.table.core.windows.net","primary_web_endpoint":"https://stbaseuksdevlog.z33.web.core.windows.net/","primary_web_host":"stbaseuksdevlog.z33.web.core.windows.net","public_network_access_enabled":true,"queue_encryption_key_type":"Service","queue_properties":[{"cors_rule":[],"hour_metrics":[{"enabled":true,"include_apis":true,"retention_policy_days":7,"version":"1.0"}],"logging":[{"delete":false,"read":false,"retention_policy_days":0,"version":"1.0","write":false}],"minute_metrics":[{"enabled":false,"include_apis":false,"retention_policy_days":0,"version":"1.0"}]}],"resource_group_name":"rg-base-example-dev","routing":[],"sas_policy":[],"secondary_access_key":"sxInMiUAVAd51bWzu3MLH3E5gslpRrAoDRwBn0xys1tswCXQefkMYsQYhI8xIY8azgw/sn5MHh8y+AStZY7RWg==","secondary_blob_connection_string":"","secondary_blob_endpoint":null,"secondary_blob_host":null,"secondary_connection_string":"DefaultEndpointsProtocol=https;AccountName=stbaseuksdevlog;AccountKey=sxInMiUAVAd51bWzu3MLH3E5gslpRrAoDRwBn0xys1tswCXQefkMYsQYhI8xIY8azgw/sn5MHh8y+AStZY7RWg==;EndpointSuffix=core.windows.net","secondary_dfs_endpoint":null,"secondary_dfs_host":null,"secondary_file_endpoint":null,"secondary_file_host":null,"secondary_location":"","secondary_queue_endpoint":null,"secondary_queue_host":null,"secondary_table_endpoint":null,"secondary_table_host":null,"secondary_web_endpoint":null,"secondary_web_host":null,"sftp_enabled":false,"share_properties":[{"cors_rule":[],"retention_policy":[{"days":7}],"smb":[]}],"shared_access_key_enabled":true,"static_website":[],"table_encryption_key_type":"Service","tags":{"env":"dev","owner":"example","stack":"base"},"timeouts":null},"sensitive_values":{"azure_files_authentication":[],"blob_properties":[{"container_delete_retention_policy":[],"cors_rule":[],"delete_retention_policy":[],"restore_policy":[]}],"custom_domain":[],"customer_managed_key":[],"identity":[],"immutability_policy":[],"network_rules":[{"bypass":[false],"ip_rules":[],"private_link_access":[],"virtual_network_subnet_ids":[]}],"queue_properties":[{"cors_rule":[],"hour_metrics":[{}],"logging":[{}],"minute_metrics":[{}]}],"routing":[],"sas_policy":[],"share_properties":[{"cors_rule":[],"retention_policy":[{}],"smb":[]}],"static_website":[],"tags":{}},"depends_on":["data.azurerm_key_vault_secret.client_id","data.azurerm_key_vault_secret.client_secret","data.azurerm_key_vault_secret.tenant_id","module.log_analytics.azurecaf_name.storage_account","module.resource_group.azurecaf_name.rg","module.resource_group.azurerm_resource_group.main_rg"]},{"address":"module.log_analytics.azurerm_storage_management_policy.archive_storage[0]","mode":"managed","type":"azurerm_storage_management_policy","name":"archive_storage","index":0,"provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"id":"/subscriptions/1b298c01-0747-469e-8955-af1486a97bc4/resourceGroups/rg-base-example-dev/providers/Microsoft.Storage/storageAccounts/stbaseuksdevlog/managementPolicies/default","rule":[{"actions":[{"base_blob":[{"delete_after_days_since_creation_greater_than":-1,"delete_after_days_since_last_access_time_greater_than":-1,"delete_after_days_since_modification_greater_than":365,"tier_to_archive_after_days_since_creation_greater_than":-1,"tier_to_archive_after_days_since_last_access_time_greater_than":-1,"tier_to_archive_after_days_since_last_tier_change_greater_than":-1,"tier_to_archive_after_days_since_modification_greater_than":90,"tier_to_cool_after_days_since_creation_greater_than":-1,"tier_to_cool_after_days_since_last_access_time_greater_than":-1,"tier_to_cool_after_days_since_modification_greater_than":30}],"snapshot":[],"version":[]}],"enabled":true,"filters":[{"blob_types":["blockBlob"],"match_blob_index_tag":[],"prefix_match":[]}],"name":"Archive"}],"storage_account_id":"/subscriptions/1b298c01-0747-469e-8955-af1486a97bc4/resourceGroups/rg-base-example-dev/providers/Microsoft.Storage/storageAccounts/stbaseuksdevlog","timeouts":null},"sensitive_values":{"rule":[{"actions":[{"base_blob":[{}],"snapshot":[],"version":[]}],"filters":[{"blob_types":[false],"match_blob_index_tag":[],"prefix_match":[]}]}]},"depends_on":["data.azurerm_key_vault_secret.client_id","data.azurerm_key_vault_secret.client_secret","data.azurerm_key_vault_secret.tenant_id","module.log_analytics.azurecaf_name.storage_account","module.log_analytics.azurerm_storage_account.storage_logs","module.resource_group.azurecaf_name.rg","module.resource_group.azurerm_resource_group.main_rg"]},{"address":"module.log_analytics.data.azurerm_subscription.current","mode":"data","type":"azurerm_subscription","name":"current","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"display_name":"Devops Hosting","id":"/subscriptions/1b298c01-0747-469e-8955-af1486a97bc4","location_placement_id":"Public_2014-09-01","quota_id":"CSP_2015-05-01","spending_limit":"Off","state":"Enabled","subscription_id":"1b298c01-0747-469e-8955-af1486a97bc4","tags":{},"tenant_id":"bc1095a9-bbd6-44bb-9434-d899022f9dc3","timeouts":null},"sensitive_values":{"tags":{}}}],"address":"module.log_analytics"},{"resources":[{"address":"module.resource_group.azurecaf_name.rg","mode":"managed","type":"azurecaf_name","name":"rg","provider_name":"registry.terraform.io/aztfmod/azurecaf","schema_version":3,"values":{"clean_input":true,"id":"hgovayvauumnhejb","name":"base","passthrough":false,"prefixes":null,"random_length":0,"random_seed":null,"resource_type":"azurerm_resource_group","resource_types":null,"result":"rg-base-example-dev","results":{},"separator":"-","suffixes":["example","dev"],"use_slug":true},"sensitive_values":{"results":{},"suffixes":[false,false]}},{"address":"module.resource_group.azurerm_resource_group.main_rg","mode":"managed","type":"azurerm_resource_group","name":"main_rg","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"id":"/subscriptions/1b298c01-0747-469e-8955-af1486a97bc4/resourceGroups/rg-base-example-dev","location":"uksouth","name":"rg-base-example-dev","tags":{"env":"dev","owner":"example","stack":"base"},"timeouts":null},"sensitive_values":{"tags":{}},"depends_on":["data.azurerm_key_vault_secret.client_id","data.azurerm_key_vault_secret.client_secret","data.azurerm_key_vault_secret.tenant_id","module.resource_group.azurecaf_name.rg"]}],"address":"module.resource_group"}]}}},"configuration":{"provider_config":{"azurerm":{"name":"azurerm","full_name":"registry.terraform.io/hashicorp/azurerm","expressions":{"client_id":{"references":["data.azurerm_key_vault_secret.client_id.value","data.azurerm_key_vault_secret.client_id"]},"client_secret":{"references":["data.azurerm_key_vault_secret.client_secret.value","data.azurerm_key_vault_secret.client_secret"]},"features":[{"key_vault":[{"purge_soft_delete_on_destroy":{"constant_value":true}}]}],"storage_use_azuread":{"constant_value":true},"subscription_id":{"references":["var.subscription_id"]},"tenant_id":{"references":["data.azurerm_key_vault_secret.tenant_id.value","data.azurerm_key_vault_secret.tenant_id"]}}},"azurerm.backend":{"name":"azurerm","full_name":"registry.terraform.io/hashicorp/azurerm","alias":"backend","expressions":{"features":[{}],"use_msi":{"constant_value":false}}},"module.container_registry:azurecaf":{"name":"azurecaf","full_name":"registry.terraform.io/aztfmod/azurecaf","version_constraint":"~\u003e 1.1","module_address":"module.container_registry"},"module.container_registry:null":{"name":"null","full_name":"registry.terraform.io/hashicorp/null","version_constraint":"~\u003e 3.0","module_address":"module.container_registry"},"module.keyvault:azurecaf":{"name":"azurecaf","full_name":"registry.terraform.io/aztfmod/azurecaf","version_constraint":"~\u003e 1.1","module_address":"module.keyvault"},"module.keyvault:null":{"name":"null","full_name":"registry.terraform.io/hashicorp/null","version_constraint":"~\u003e 3.0","module_address":"module.keyvault"},"module.log_analytics:azurecaf":{"name":"azurecaf","full_name":"registry.terraform.io/aztfmod/azurecaf","version_constraint":"~\u003e 1.1","module_address":"module.log_analytics"},"module.log_analytics:external":{"name":"external","full_name":"registry.terraform.io/hashicorp/external","module_address":"module.log_analytics"},"module.log_analytics:null":{"name":"null","full_name":"registry.terraform.io/hashicorp/null","version_constraint":"~\u003e 3.0","module_address":"module.log_analytics"},"module.resource_group:azurecaf":{"name":"azurecaf","full_name":"registry.terraform.io/aztfmod/azurecaf","version_constraint":"~\u003e 1.1","module_address":"module.resource_group"},"module.resource_group:null":{"name":"null","full_name":"registry.terraform.io/hashicorp/null","version_constraint":"~\u003e 3.0","module_address":"module.resource_group"}},"root_module":{"outputs":{"result":{"sensitive":true,"expression":{"references":["module.resource_group.result","module.resource_group","module.log_analytics.result","module.log_analytics","module.container_registry.result","module.container_registry","module.keyvault.result","module.keyvault","azurerm_private_dns_zone.private_dns_zone.id","azurerm_private_dns_zone.private_dns_zone","azurerm_private_dns_zone.private_dns_zone.name","azurerm_private_dns_zone.private_dns_zone"]}}},"resources":[{"address":"azurerm_private_dns_zone.private_dns_zone","mode":"managed","type":"azurerm_private_dns_zone","name":"private_dns_zone","provider_config_key":"azurerm","expressions":{"name":{"references":["var.environment"]},"resource_group_name":{"references":["module.resource_group.resource_group_name","module.resource_group"]},"tags":{"references":["var.environment","var.stack"]}},"schema_version":0},{"address":"data.azurerm_client_config.current","mode":"data","type":"azurerm_client_config","name":"current","provider_config_key":"azurerm","schema_version":0},{"address":"data.azurerm_key_vault_secret.client_id","mode":"data","type":"azurerm_key_vault_secret","name":"client_id","provider_config_key":"azurerm.backend","expressions":{"key_vault_id":{"references":["var.subscription_id","var.backend_resource_group_name","var.backend_storage_account_name"]},"name":{"constant_value":"client-id"}},"schema_version":0},{"address":"data.azurerm_key_vault_secret.client_secret","mode":"data","type":"azurerm_key_vault_secret","name":"client_secret","provider_config_key":"azurerm.backend","expressions":{"key_vault_id":{"references":["var.subscription_id","var.backend_resource_group_name","var.backend_storage_account_name"]},"name":{"constant_value":"client-secret"}},"schema_version":0},{"address":"data.azurerm_key_vault_secret.tenant_id","mode":"data","type":"azurerm_key_vault_secret","name":"tenant_id","provider_config_key":"azurerm.backend","expressions":{"key_vault_id":{"references":["var.subscription_id","var.backend_resource_group_name","var.backend_storage_account_name"]},"name":{"constant_value":"tenant-id"}},"schema_version":0}],"module_calls":{"container_registry":{"source":"../../../../../modules/azure/terraform_azurerm_acr","expressions":{"client_name":{"constant_value":"demo"},"environment":{"references":["var.environment"]},"extra_tags":{"constant_value":{"owner":"demo"}},"location":{"references":["var.location"]},"location_short":{"references":["var.location_short"]},"resource_group_name":{"references":["module.resource_group.resource_group_name","module.resource_group"]},"stack":{"references":["var.stack"]}},"module":{"outputs":{"acr_fqdn":{"expression":{"references":["azurerm_container_registry.registry.login_server","azurerm_container_registry.registry"]},"description":"The Container Registry FQDN."},"acr_id":{"expression":{"references":["azurerm_container_registry.registry.id","azurerm_container_registry.registry"]},"description":"The Container Registry ID."},"acr_name":{"expression":{"references":["azurerm_container_registry.registry.name","azurerm_container_registry.registry"]},"description":"The Container Registry name."},"admin_password":{"sensitive":true,"expression":{"references":["azurerm_container_registry.registry.admin_password","azurerm_container_registry.registry"]},"description":"The Password associated with the Container Registry Admin account - if the admin account is enabled."},"admin_username":{"expression":{"references":["azurerm_container_registry.registry.admin_username","azurerm_container_registry.registry"]},"description":"The Username associated with the Container Registry Admin account - if the admin account is enabled."},"login_server":{"expression":{"references":["azurerm_container_registry.registry.login_server","azurerm_container_registry.registry"]},"description":"The URL that can be used to log into the container registry."},"result":{"expression":{"references":["local.acr_outputs.inputs","local.acr_outputs"]}}},"resources":[{"address":"azurecaf_name.acr","mode":"managed","type":"azurecaf_name","name":"acr","provider_config_key":"module.container_registry:azurecaf","expressions":{"clean_input":{"constant_value":true},"name":{"references":["var.stack"]},"prefixes":{"references":["var.name_prefix","local.name_prefix"]},"resource_type":{"constant_value":"azurerm_container_registry"},"separator":{"constant_value":"-"},"suffixes":{"references":["var.client_name","var.location_short","var.environment","local.name_suffix","var.use_caf_naming"]},"use_slug":{"references":["var.use_caf_naming"]}},"schema_version":3},{"address":"azurerm_container_registry.registry","mode":"managed","type":"azurerm_container_registry","name":"registry","provider_config_key":"azurerm","expressions":{"admin_enabled":{"references":["var.admin_enabled"]},"location":{"references":["var.location"]},"name":{"references":["local.acr_name"]},"network_rule_bypass_option":{"references":["var.azure_services_bypass_allowed"]},"resource_group_name":{"references":["var.resource_group_name"]},"sku":{"references":["var.sku"]},"tags":{"references":["local.default_tags","var.extra_tags"]}},"schema_version":2}],"variables":{"admin_enabled":{"default":true,"description":"Specifies whether the admin user is enabled."},"allowed_cidrs":{"default":[],"description":"List of CIDRs to allow on the registry"},"allowed_subnets":{"default":[],"description":"List of VNet/Subnet IDs to allow on the registry"},"azure_services_bypass_allowed":{"default":false,"description":"Whether to allow trusted Azure services to access a network restricted Container Registry"},"client_name":{"description":"Client name/account used in naming"},"custom_name":{"default":"","description":"Custom Azure Container Registry name, generated if not set"},"default_tags_enabled":{"default":true,"description":"Option to enable or disable default tags."},"environment":{"description":"Project environment"},"extra_tags":{"default":{},"description":"Additional tags to associate with your Azure Container Registry."},"georeplication_locations":{"default":[],"description":"  A list of Azure locations where the container registry should be geo-replicated. Only activated on Premium SKU.\n  Supported properties are:\n    location                  = string\n    zone_redundancy_enabled   = bool\n    regional_endpoint_enabled = bool\n    tags                      = map(string)\n  or this can be a list of `string` (each element is a location)\n"},"images_retention_days":{"default":90,"description":"Specifies the number of images retention days."},"images_retention_enabled":{"default":false,"description":"Specifies whether images retention is enabled (Premium only)."},"location":{"description":"Azure region to use"},"location_short":{"description":"Short string for Azure location"},"name_prefix":{"default":"","description":"Optional prefix for the generated name"},"name_suffix":{"default":"","description":"Optional suffix for the generated name"},"resource_group_name":{"description":"Name of the resource group"},"sku":{"default":"Premium","description":"The SKU name of the the container registry. Possible values are Classic (which was previously Basic), Basic, Standard and Premium."},"stack":{"description":"Project stack name"},"trust_policy_enabled":{"default":false,"description":"Specifies whether the trust policy is enabled (Premium only)."},"use_caf_naming":{"default":true,"description":"Use the Azure CAF naming provider to generate default resource name. `custom_name` override this if set. Legacy default name is used if this is set to `false`."}}}},"keyvault":{"source":"../../../../../modules/azure/terraform_azurerm_keyvault","expressions":{"admin_objects_ids":{"constant_value":["690e2167-e552-4c9f-9d3e-92d7efc272ba"]},"client_name":{"constant_value":"demo"},"environment":{"references":["var.environment"]},"extra_tags":{"constant_value":{"owner":"demo"}},"location":{"references":["var.location"]},"location_short":{"references":["var.location_short"]},"network_acls":{"constant_value":{"bypass":"AzureServices","default_action":"Allow","ip_rules":[],"virtual_network_subnet_ids":[]}},"rbac_authorization_enabled":{"constant_value":false},"resource_group_name":{"references":["module.resource_group.resource_group_name","module.resource_group"]},"stack":{"references":["var.stack"]}},"module":{"outputs":{"key_vault_id":{"expression":{"references":["azurerm_key_vault.keyvault.id","azurerm_key_vault.keyvault"]},"description":"Id of the Key Vault"},"key_vault_name":{"expression":{"references":["azurerm_key_vault.keyvault.name","azurerm_key_vault.keyvault"]},"description":"Name of the Key Vault"},"key_vault_uri":{"expression":{"references":["azurerm_key_vault.keyvault.vault_uri","azurerm_key_vault.keyvault"]},"description":"URI of the Key Vault"},"result":{"expression":{"references":["local.keyvault_outputs.inputs","local.keyvault_outputs"]}}},"resources":[{"address":"azurecaf_name.keyvault","mode":"managed","type":"azurecaf_name","name":"keyvault","provider_config_key":"module.keyvault:azurecaf","expressions":{"clean_input":{"constant_value":true},"name":{"references":["var.stack"]},"prefixes":{"references":["var.name_prefix","local.name_prefix"]},"resource_type":{"constant_value":"azurerm_key_vault"},"separator":{"constant_value":"-"},"suffixes":{"references":["var.client_name","var.location_short","var.environment","local.name_suffix","var.use_caf_naming"]},"use_slug":{"references":["var.use_caf_naming"]}},"schema_version":3},{"address":"azurerm_key_vault.keyvault","mode":"managed","type":"azurerm_key_vault","name":"keyvault","provider_config_key":"azurerm","expressions":{"enable_rbac_authorization":{"references":["var.rbac_authorization_enabled"]},"enabled_for_deployment":{"references":["var.enabled_for_deployment"]},"enabled_for_disk_encryption":{"references":["var.enabled_for_disk_encryption"]},"enabled_for_template_deployment":{"references":["var.enabled_for_template_deployment"]},"location":{"references":["var.location"]},"name":{"references":["local.name"]},"purge_protection_enabled":{"references":["var.purge_protection_enabled"]},"resource_group_name":{"references":["var.resource_group_name"]},"sku_name":{"references":["var.sku_name"]},"tags":{"references":["local.default_tags","var.extra_tags"]},"tenant_id":{"references":["local.tenant_id"]}},"schema_version":2},{"address":"azurerm_key_vault_access_policy.admin_policy","mode":"managed","type":"azurerm_key_vault_access_policy","name":"admin_policy","provider_config_key":"azurerm","expressions":{"certificate_permissions":{"constant_value":["Backup","Create","Delete","DeleteIssuers","Get","GetIssuers","Import","List","ListIssuers","ManageContacts","ManageIssuers","Purge","Recover","Restore","SetIssuers","Update"]},"key_permissions":{"constant_value":["Backup","Create","Decrypt","Delete","Encrypt","Get","Import","List","Purge","Recover","Restore","Sign","UnwrapKey","Update","Verify","WrapKey"]},"key_vault_id":{"references":["azurerm_key_vault.keyvault.id","azurerm_key_vault.keyvault"]},"object_id":{"references":["each.value"]},"secret_permissions":{"constant_value":["Backup","Delete","Get","List","Purge","Recover","Restore","Set"]},"tenant_id":{"references":["local.tenant_id"]}},"schema_version":0,"for_each_expression":{"references":["var.rbac_authorization_enabled","var.admin_objects_ids"]}},{"address":"azurerm_key_vault_access_policy.readers_policy","mode":"managed","type":"azurerm_key_vault_access_policy","name":"readers_policy","provider_config_key":"azurerm","expressions":{"certificate_permissions":{"constant_value":["Get","List"]},"key_permissions":{"constant_value":["Get","List"]},"key_vault_id":{"references":["azurerm_key_vault.keyvault.id","azurerm_key_vault.keyvault"]},"object_id":{"references":["each.value"]},"secret_permissions":{"constant_value":["Get","List"]},"tenant_id":{"references":["local.tenant_id"]}},"schema_version":0,"for_each_expression":{"references":["var.rbac_authorization_enabled","var.reader_objects_ids"]}},{"address":"azurerm_role_assignment.rbac_keyvault_administrator","mode":"managed","type":"azurerm_role_assignment","name":"rbac_keyvault_administrator","provider_config_key":"azurerm","expressions":{"principal_id":{"references":["each.value"]},"role_definition_name":{"constant_value":"Key Vault Administrator"},"scope":{"references":["azurerm_key_vault.keyvault.id","azurerm_key_vault.keyvault"]}},"schema_version":0,"for_each_expression":{"references":["var.rbac_authorization_enabled","var.admin_objects_ids"]}},{"address":"azurerm_role_assignment.rbac_keyvault_reader","mode":"managed","type":"azurerm_role_assignment","name":"rbac_keyvault_reader","provider_config_key":"azurerm","expressions":{"principal_id":{"references":["each.value"]},"role_definition_name":{"constant_value":"Key Vault Reader"},"scope":{"references":["azurerm_key_vault.keyvault.id","azurerm_key_vault.keyvault"]}},"schema_version":0,"for_each_expression":{"references":["var.rbac_authorization_enabled","var.reader_objects_ids"]}},{"address":"azurerm_role_assignment.rbac_keyvault_secrets_users","mode":"managed","type":"azurerm_role_assignment","name":"rbac_keyvault_secrets_users","provider_config_key":"azurerm","expressions":{"principal_id":{"references":["each.value"]},"role_definition_name":{"constant_value":"Key Vault Secrets User"},"scope":{"references":["azurerm_key_vault.keyvault.id","azurerm_key_vault.keyvault"]}},"schema_version":0,"for_each_expression":{"references":["var.rbac_authorization_enabled","var.reader_objects_ids"]}},{"address":"data.azurerm_client_config.current_config","mode":"data","type":"azurerm_client_config","name":"current_config","provider_config_key":"azurerm","schema_version":0}],"variables":{"admin_objects_ids":{"default":[],"description":"Ids of the objects that can do all operations on all keys, secrets and certificates"},"client_name":{"description":"Client name"},"custom_name":{"default":"","description":"Name of the Key Vault, generated if not set."},"default_tags_enabled":{"default":true,"description":"Option to enable or disable default tags."},"enabled_for_deployment":{"default":true,"description":"Boolean flag to specify whether Azure Virtual Machines are permitted to retrieve certificates stored as secrets from the key vault."},"enabled_for_disk_encryption":{"default":true,"description":"Boolean flag to specify whether Azure Disk Encryption is permitted to retrieve secrets from the vault and unwrap keys."},"enabled_for_template_deployment":{"default":true,"description":"Boolean flag to specify whether Azure Resource Manager is permitted to retrieve secrets from the key vault."},"environment":{"description":"Environment name"},"extra_tags":{"default":{},"description":"Extra tags to add."},"location":{"description":"Azure location for Key Vault."},"location_short":{"description":"Short string for Azure location."},"name_prefix":{"default":"","description":"Optional prefix for the generated name"},"name_suffix":{"default":"","description":"Optional suffix for the generated name"},"network_acls":{"default":null,"description":"Object with attributes: `bypass`, `default_action`, `ip_rules`, `virtual_network_subnet_ids`. See https://www.terraform.io/docs/providers/azurerm/r/key_vault.html#bypass for more informations."},"purge_protection_enabled":{"default":true,"description":"Whether to activate purge protection"},"rbac_authorization_enabled":{"default":false,"description":"Boolean flag to specify whether Azure Key Vault uses Role Based Access Control (RBAC) for authorization of data actions instead of access policies."},"reader_objects_ids":{"default":[],"description":"Ids of the objects that can read all keys, secrets and certificates"},"resource_group_name":{"description":"Resource Group the resources will belong to"},"sku_name":{"default":"standard","description":"The Name of the SKU used for this Key Vault. Possible values are \"standard\" and \"premium\"."},"stack":{"description":"Stack name"},"tenant_id":{"default":"","description":"The Azure Active Directory tenant ID that should be used for authenticating requests to the Key Vault. Default is the current one."},"use_caf_naming":{"default":true,"description":"Use the Azure CAF naming provider to generate default resource name. `custom_name` override this if set. Legacy default name is used if this is set to `false`."}}}},"log_analytics":{"source":"../../../../../modules/azure/terraform_azurerm_log_analytics","expressions":{"client_name":{"constant_value":"demo"},"environment":{"references":["var.environment"]},"extra_tags":{"constant_value":{"new-tag":"false","owner":"demo"}},"location":{"references":["var.location"]},"location_short":{"references":["var.location_short"]},"resource_group_name":{"references":["module.resource_group.resource_group_name","module.resource_group"]},"stack":{"references":["var.stack"]}},"module":{"outputs":{"log_analytics_workspace_guid":{"expression":{"references":["azurerm_log_analytics_workspace.log_workspace.workspace_id","azurerm_log_analytics_workspace.log_workspace"]},"description":"The Log Analytics Workspace GUID."},"log_analytics_workspace_id":{"expression":{"references":["azurerm_log_analytics_workspace.log_workspace.id","azurerm_log_analytics_workspace.log_workspace"]},"description":"The Log Analytics Workspace ID."},"log_analytics_workspace_name":{"expression":{"references":["azurerm_log_analytics_workspace.log_workspace.name","azurerm_log_analytics_workspace.log_workspace"]},"description":"The Log Analytics Workspace name."},"log_analytics_workspace_primary_key":{"sensitive":true,"expression":{"references":["azurerm_log_analytics_workspace.log_workspace.primary_shared_key","azurerm_log_analytics_workspace.log_workspace"]},"description":"The Primary shared key for the Log Analytics Workspace."},"log_analytics_workspace_secondary_key":{"sensitive":true,"expression":{"references":["azurerm_log_analytics_workspace.log_workspace.secondary_shared_key","azurerm_log_analytics_workspace.log_workspace"]},"description":"The Secondary shared key for the Log Analytics Workspace."},"logs_resource_group_name":{"expression":{"references":["var.resource_group_name"]},"description":"Resource Group the logs resources belongs to"},"logs_storage_account_appservices_container_name":{"expression":{"references":["azurerm_storage_container.container_webapps"]},"description":"Name of the container in which App Services logs are stored"},"logs_storage_account_archived_logs_fileshare_name":{"expression":{"references":["azurerm_storage_share.archivedlogs_fileshare"]},"description":"Name of the file share in which externalized logs are stored"},"logs_storage_account_id":{"expression":{"references":["azurerm_storage_account.storage_logs.id","azurerm_storage_account.storage_logs"]},"description":"Id of the dedicated Storage Account"},"logs_storage_account_name":{"expression":{"references":["azurerm_storage_account.storage_logs.name","azurerm_storage_account.storage_logs"]},"description":"Name of the logs Storage Account"},"logs_storage_account_primary_access_key":{"sensitive":true,"expression":{"references":["azurerm_storage_account.storage_logs.primary_access_key","azurerm_storage_account.storage_logs"]},"description":"Primary connection string of the logs Storage Account, empty if connection string provided"},"logs_storage_account_primary_connection_string":{"sensitive":true,"expression":{"references":["azurerm_storage_account.storage_logs.primary_connection_string","azurerm_storage_account.storage_logs"]},"description":"Primary connection string of the logs Storage Account, empty if connection string provided"},"logs_storage_account_sas_token":{"sensitive":true,"expression":{"references":["local.sas_token"]},"description":"SAS Token generated for logs access on Storage Account with full permissions on containers and objects for blob and table services."},"logs_storage_account_secondary_access_key":{"sensitive":true,"expression":{"references":["azurerm_storage_account.storage_logs.secondary_access_key","azurerm_storage_account.storage_logs"]},"description":"Secondary connection string of the logs Storage Account, empty if connection string provided"},"logs_storage_account_secondary_connection_string":{"sensitive":true,"expression":{"references":["azurerm_storage_account.storage_logs.secondary_connection_string","azurerm_storage_account.storage_logs"]},"description":"Secondary connection string of the logs Storage Account, empty if connection string provided"},"result":{"expression":{"references":["local.log_analytics_outputs.inputs","local.log_analytics_outputs"]}},"storage_account_sas_container_uri":{"sensitive":true,"expression":{"references":["local.sas_uri_container"]},"description":"SAS URI generated for access on Storage Account Container."},"storage_account_sas_token":{"sensitive":true,"expression":{"references":["local.sas_token"]},"description":"SAS Token generated for access on Storage Account."}},"resources":[{"address":"azurecaf_name.log_analytics_workspace","mode":"managed","type":"azurecaf_name","name":"log_analytics_workspace","provider_config_key":"module.log_analytics:azurecaf","expressions":{"clean_input":{"constant_value":true},"name":{"references":["var.stack"]},"prefixes":{"references":["var.log_analytics_workspace_name_prefix","local.log_analytics_workspace_name_prefix"]},"resource_type":{"constant_value":"azurerm_log_analytics_workspace"},"separator":{"constant_value":"-"},"suffixes":{"references":["var.client_name","var.location_short","var.environment","local.name_suffix","var.use_caf_naming"]},"use_slug":{"references":["var.use_caf_naming"]}},"schema_version":3},{"address":"azurecaf_name.storage_account","mode":"managed","type":"azurecaf_name","name":"storage_account","provider_config_key":"module.log_analytics:azurecaf","expressions":{"clean_input":{"constant_value":true},"name":{"references":["var.stack"]},"prefixes":{"constant_value":null},"resource_type":{"constant_value":"azurerm_storage_account"},"separator":{"constant_value":"-"},"suffixes":{"references":["local.logs_storage_account_name_prefix","var.location_short","var.environment","local.name_suffix"]},"use_slug":{"references":["var.use_caf_naming"]}},"schema_version":3},{"address":"azurerm_advanced_threat_protection.storage_threat_protection","mode":"managed","type":"azurerm_advanced_threat_protection","name":"storage_threat_protection","provider_config_key":"azurerm","expressions":{"enabled":{"references":["var.logs_storage_account_enable_advanced_threat_protection"]},"target_resource_id":{"references":["azurerm_storage_account.storage_logs.id","azurerm_storage_account.storage_logs"]}},"schema_version":1},{"address":"azurerm_log_analytics_workspace.log_workspace","mode":"managed","type":"azurerm_log_analytics_workspace","name":"log_workspace","provider_config_key":"azurerm","expressions":{"location":{"references":["var.location"]},"name":{"references":["var.log_analytics_workspace_custom_name","local.log_analytics_name"]},"resource_group_name":{"references":["var.resource_group_name"]},"retention_in_days":{"references":["var.log_analytics_workspace_retention_in_days"]},"sku":{"references":["var.log_analytics_workspace_sku"]},"tags":{"references":["local.default_tags","var.extra_tags","var.log_analytics_workspace_extra_tags"]}},"schema_version":3},{"address":"azurerm_storage_account.storage_logs","mode":"managed","type":"azurerm_storage_account","name":"storage_logs","provider_config_key":"azurerm","expressions":{"account_kind":{"references":["var.logs_storage_account_kind"]},"account_replication_type":{"constant_value":"LRS"},"account_tier":{"constant_value":"Standard"},"enable_https_traffic_only":{"references":["var.logs_storage_account_enable_https_traffic_only"]},"location":{"references":["var.location"]},"min_tls_version":{"references":["var.logs_storage_min_tls_version"]},"name":{"references":["local.storage_default_name"]},"resource_group_name":{"references":["var.resource_group_name"]},"tags":{"references":["local.default_tags","var.extra_tags","var.logs_storage_account_extra_tags"]}},"schema_version":3},{"address":"azurerm_storage_container.container_webapps","mode":"managed","type":"azurerm_storage_container","name":"container_webapps","provider_config_key":"azurerm","expressions":{"name":{"references":["var.logs_storage_account_appservices_container_name"]},"storage_account_name":{"references":["azurerm_storage_account.storage_logs.name","azurerm_storage_account.storage_logs"]}},"schema_version":1,"count_expression":{"references":["var.logs_storage_account_enable_appservices_container"]}},{"address":"azurerm_storage_management_policy.archive_storage","mode":"managed","type":"azurerm_storage_management_policy","name":"archive_storage","provider_config_key":"azurerm","expressions":{"rule":[{"actions":[{"base_blob":[{"delete_after_days_since_modification_greater_than":{"references":["var.delete_after_days_since_modification_greater_than"]},"tier_to_archive_after_days_since_modification_greater_than":{"references":["var.tier_to_archive_after_days_since_modification_greater_than"]},"tier_to_cool_after_days_since_modification_greater_than":{"references":["var.tier_to_cool_after_days_since_modification_greater_than"]}}]}],"enabled":{"constant_value":true},"filters":[{"blob_types":{"constant_value":["blockBlob"]}}],"name":{"constant_value":"Archive"}}],"storage_account_id":{"references":["azurerm_storage_account.storage_logs.id","azurerm_storage_account.storage_logs"]}},"schema_version":0,"count_expression":{"references":["var.logs_storage_account_kind","var.logs_storage_account_enable_archiving"]}},{"address":"azurerm_storage_share.archivedlogs_fileshare","mode":"managed","type":"azurerm_storage_share","name":"archivedlogs_fileshare","provider_config_key":"azurerm","expressions":{"name":{"references":["var.logs_storage_account_archived_logs_fileshare_name"]},"quota":{"references":["var.logs_storage_account_archived_logs_fileshare_quota"]},"storage_account_name":{"references":["azurerm_storage_account.storage_logs.name","azurerm_storage_account.storage_logs"]}},"schema_version":2,"count_expression":{"references":["var.logs_storage_account_enable_archived_logs_fileshare"]}},{"address":"data.azurerm_subscription.current","mode":"data","type":"azurerm_subscription","name":"current","provider_config_key":"azurerm","schema_version":0},{"address":"data.external.generate_storage_sas_token","mode":"data","type":"external","name":"generate_storage_sas_token","provider_config_key":"module.log_analytics:external","expressions":{"program":{"references":["path.module"]},"query":{"references":["local.sa_name","azurerm_storage_account.storage_logs.primary_connection_string","azurerm_storage_account.storage_logs","var.storage_container","var.sas_token_expiry","var.services","var.resources_types","var.permissions_account","var.permissions_container"]}},"schema_version":0}],"variables":{"client_name":{"description":"Client name"},"default_tags_enabled":{"default":true,"description":"Option to enable or disable default tags"},"delete_after_days_since_modification_greater_than":{"default":365,"description":"Delete blob after x days without modification"},"environment":{"description":"Environment name"},"extra_tags":{"default":{},"description":"Extra tags to add"},"location":{"description":"Azure location."},"location_short":{"description":"Short string for Azure location."},"log_analytics_workspace_custom_name":{"default":"","description":"Azure Log Analytics Workspace custom name. Empty by default, using naming convention."},"log_analytics_workspace_extra_tags":{"default":{},"description":"Extra tags to add to the Log Analytics Workspace"},"log_analytics_workspace_name_prefix":{"default":"","description":"Log Analytics name prefix"},"log_analytics_workspace_retention_in_days":{"default":30,"description":"The workspace data retention in days. Possible values range between 30 and 730."},"log_analytics_workspace_sku":{"default":"PerGB2018","description":"Specifies the SKU of the Log Analytics Workspace. Possible values are Free, PerNode, Premium, Standard, Standalone, Unlimited, and PerGB2018 (new Sku as of 2018-04-03)."},"logs_storage_account_appservices_container_name":{"default":"app-services","description":"Name of the container in which App Services logs are stored"},"logs_storage_account_archived_logs_fileshare_name":{"default":"archived-logs","description":"Name of the file share in which externalized logs are stored"},"logs_storage_account_archived_logs_fileshare_quota":{"default":null,"description":"The maximum size in GB of the archived-logs file share, default is 5120"},"logs_storage_account_custom_name":{"default":"","description":"Storage Account for logs custom name. Empty by default, using naming convention."},"logs_storage_account_enable_advanced_threat_protection":{"default":false,"description":"Enable/disable Advanced Threat Protection, see [here](https://docs.microsoft.com/en-us/azure/storage/common/storage-advanced-threat-protection?tabs=azure-portal) for more information."},"logs_storage_account_enable_appservices_container":{"default":false,"description":"Boolean flag which controls if App Services logs container should be created."},"logs_storage_account_enable_archived_logs_fileshare":{"default":false,"description":"Enable/disable archived-logs file share creation"},"logs_storage_account_enable_archiving":{"default":true,"description":"Enable/disable blob archiving lifecycle"},"logs_storage_account_enable_https_traffic_only":{"default":true,"description":"Enable/disable HTTPS traffic only"},"logs_storage_account_extra_tags":{"default":{},"description":"Extra tags to add to the Storage Account"},"logs_storage_account_kind":{"default":"StorageV2","description":"Storage Account Kind"},"logs_storage_account_name_prefix":{"default":"","description":"Storage Account name prefix"},"logs_storage_account_sas_expiry":{"default":"2042-01-01T00:00:00Z","description":"Storage Account SAS Token end date (expiry). Specifies the UTC datetime (Y-m-d'T'H:M'Z') at which the SAS becomes invalid."},"logs_storage_min_tls_version":{"default":"TLS1_2","description":"Storage Account minimal TLS version"},"name_prefix":{"default":"","description":"Optional prefix for the generated name"},"name_suffix":{"default":"","description":"Optional suffix for the generated name"},"permissions_account":{"default":"wlacu","description":"The permissions the Account SAS grants. Allowed values: (a)dd (c)reate (d)elete (l)ist (p)rocess (r)ead (u)pdate (w)rite. Can be combined."},"permissions_container":{"default":"dlrw","description":"The permissions the Container SAS grants. Allowed values: (a)dd (c)reate (d)elete (l)ist (r)ead (w)rite. Can be combined."},"resource_group_name":{"description":"Resource Group the resources will belong to"},"resources_types":{"default":"sco","description":"The resource types the Account SAS is applicable for. Allowed values: (s)ervice (c)ontainer (o)bject. Can be combined."},"sas_token_expiry":{"default":"2042-01-01T00:00:00Z","description":"Storage Account SAS Token end date (expiry). Specifies the UTC datetime (Y-m-d'T'H:M'Z') at which the SAS becomes invalid."},"services":{"default":"bfqt","description":"The storage services the Account SAS is applicable for. Allowed values: (b)lob (f)ile (q)ueue (t)able. Can be combined."},"stack":{"description":"Stack name"},"storage_container":{"default":"","description":"Storage Account Container to use in order to generate a Service SAS Token."},"tier_to_archive_after_days_since_modification_greater_than":{"default":90,"description":"Change blob tier to Archive after x days without modification"},"tier_to_cool_after_days_since_modification_greater_than":{"default":30,"description":"Change blob tier to cool after x days without modification"},"use_caf_naming":{"default":true,"description":"Use the Azure CAF naming provider to generate default resource name. `custom_name` override this if set. Legacy default name is used if this is set to `false`."}}}},"resource_group":{"source":"../../../../../modules/azure/terraform_azurerm_resource_group","expressions":{"client_name":{"constant_value":"demo"},"environment":{"references":["var.environment"]},"extra_tags":{"constant_value":{"owner":"demo"}},"location":{"references":["var.location"]},"stack":{"references":["var.stack"]}},"module":{"outputs":{"resource_group_id":{"expression":{"references":["azurerm_resource_group.main_rg.id","azurerm_resource_group.main_rg"]},"description":"Resource group generated id"},"resource_group_location":{"expression":{"references":["azurerm_resource_group.main_rg.location","azurerm_resource_group.main_rg"]},"description":"Resource group location (region)"},"resource_group_name":{"expression":{"references":["azurerm_resource_group.main_rg.name","azurerm_resource_group.main_rg"]},"description":"Resource group name"},"result":{"expression":{"references":["local.resource_group_outputs.inputs","local.resource_group_outputs"]}}},"resources":[{"address":"azurecaf_name.rg","mode":"managed","type":"azurecaf_name","name":"rg","provider_config_key":"module.resource_group:azurecaf","expressions":{"clean_input":{"constant_value":true},"name":{"references":["var.stack"]},"prefixes":{"references":["var.name_prefix","local.name_prefix"]},"resource_type":{"constant_value":"azurerm_resource_group"},"separator":{"constant_value":"-"},"suffixes":{"references":["var.client_name","var.environment","local.name_suffix","var.use_caf_naming","local.example_slug"]},"use_slug":{"references":["var.use_caf_naming"]}},"schema_version":3},{"address":"azurerm_management_lock.resource_group_level_lock","mode":"managed","type":"azurerm_management_lock","name":"resource_group_level_lock","provider_config_key":"azurerm","expressions":{"lock_level":{"references":["var.lock_level"]},"name":{"references":["local.rg_name"]},"notes":{"references":["local.rg_name","var.lock_level"]},"scope":{"references":["azurerm_resource_group.main_rg.id","azurerm_resource_group.main_rg"]}},"schema_version":0,"count_expression":{"references":["var.lock_level"]}},{"address":"azurerm_resource_group.main_rg","mode":"managed","type":"azurerm_resource_group","name":"main_rg","provider_config_key":"azurerm","expressions":{"location":{"references":["var.location"]},"name":{"references":["local.rg_name"]},"tags":{"references":["local.default_tags","var.extra_tags"]}},"schema_version":0}],"variables":{"client_name":{"description":"Client name/account used in naming"},"custom_rg_name":{"default":"","description":"Optional custom resource group name"},"default_tags_enabled":{"default":true,"description":"Option to enable or disable default tags."},"environment":{"description":"Project environment"},"extra_tags":{"default":{},"description":"Extra tags to add."},"location":{"description":"Azure region to use"},"lock_level":{"default":"","description":"Specifies the Level to be used for this RG Lock. Possible values are Empty (no lock), CanNotDelete and ReadOnly."},"name_prefix":{"default":"","description":"Optional prefix for the generated name"},"name_suffix":{"default":"","description":"Optional suffix for the generated name"},"stack":{"description":"Project stack name"},"use_caf_naming":{"default":true,"description":"Use the Azure CAF naming provider to generate default resource name. `custom_rg_name` override this if set. Legacy default name is used if this is set to `false`."}}}}},"variables":{"backend_resource_group_name":{},"backend_storage_account_container_name":{},"backend_storage_account_name":{},"environment":{},"location":{},"location_short":{},"stack":{},"subscription_id":{}}}},"relevant_attributes":[{"resource":"module.log_analytics.azurerm_log_analytics_workspace.log_workspace","attribute":["primary_shared_key"]},{"resource":"module.log_analytics.azurerm_log_analytics_workspace.log_workspace","attribute":["id"]},{"resource":"module.log_analytics.azurerm_storage_account.storage_logs","attribute":["name"]},{"resource":"module.log_analytics.azurerm_log_analytics_workspace.log_workspace","attribute":["name"]},{"resource":"module.log_analytics.azurerm_storage_share.archivedlogs_fileshare","attribute":[]},{"resource":"module.log_analytics.azurerm_storage_account.storage_logs","attribute":["secondary_connection_string"]},{"resource":"azurerm_private_dns_zone.private_dns_zone","attribute":["id"]},{"resource":"module.resource_group.azurecaf_name.rg","attribute":["result"]},{"resource":"module.container_registry.azurecaf_name.acr","attribute":["result"]},{"resource":"module.log_analytics.data.external.generate_storage_sas_token","attribute":[]},{"resource":"module.log_analytics.azurerm_storage_container.container_webapps","attribute":[]},{"resource":"module.container_registry.azurerm_container_registry.registry","attribute":["login_server"]},{"resource":"module.log_analytics.azurerm_storage_account.storage_logs","attribute":["id"]},{"resource":"module.resource_group.azurerm_resource_group.main_rg","attribute":["location"]},{"resource":"module.container_registry.azurerm_container_registry.registry","attribute":["name"]},{"resource":"module.log_analytics.azurerm_storage_account.storage_logs","attribute":["primary_connection_string"]},{"resource":"module.resource_group.azurerm_resource_group.main_rg","attribute":["id"]},{"resource":"module.resource_group.azurerm_resource_group.main_rg","attribute":["name"]},{"resource":"module.keyvault.azurerm_key_vault.keyvault","attribute":["name"]},{"resource":"module.log_analytics.azurecaf_name.storage_account","attribute":["result"]},{"resource":"module.log_analytics.azurerm_storage_account.storage_logs","attribute":["primary_access_key"]},{"resource":"module.container_registry.azurerm_container_registry.registry","attribute":["admin_password"]},{"resource":"module.container_registry.azurerm_container_registry.registry","attribute":["id"]},{"resource":"module.keyvault.azurecaf_name.keyvault","attribute":["result"]},{"resource":"module.keyvault.azurerm_key_vault.keyvault","attribute":["id"]},{"resource":"module.log_analytics.azurerm_log_analytics_workspace.log_workspace","attribute":["secondary_shared_key"]},{"resource":"module.keyvault.azurerm_key_vault.keyvault","attribute":["vault_uri"]},{"resource":"azurerm_private_dns_zone.private_dns_zone","attribute":["name"]},{"resource":"module.keyvault.data.azurerm_client_config.current_config","attribute":["tenant_id"]},{"resource":"module.log_analytics.azurerm_log_analytics_workspace.log_workspace","attribute":["workspace_id"]},{"resource":"module.log_analytics.azurerm_storage_account.storage_logs","attribute":["secondary_access_key"]},{"resource":"module.container_registry.azurerm_container_registry.registry","attribute":["admin_username"]},{"resource":"module.log_analytics.azurecaf_name.log_analytics_workspace","attribute":["result"]}]}
